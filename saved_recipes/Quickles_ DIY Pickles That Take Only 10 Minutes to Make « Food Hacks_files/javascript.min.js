/*!
** Unobtrusive Ajax support library for jQuery
** Copyright (C) Microsoft Corporation. All rights reserved.
*/
(function(a){var b="unobtrusiveAjaxClick",g="unobtrusiveValidation";function c(d,b){var a=window,c=(d||"").split(".");while(a&&c.length)a=a[c.shift()];if(typeof a==="function")return a;b.push(d);return Function.constructor.apply(null,b)}function d(a){return a==="GET"||a==="POST"}function f(b,a){!d(a)&&b.setRequestHeader("X-HTTP-Method-Override",a)}function h(c,b,e){var d;if(e.indexOf("application/x-javascript")!==-1)return;d=(c.getAttribute("data-ajax-mode")||"").toUpperCase();a(c.getAttribute("data-ajax-update")).each(function(f,c){var e;switch(d){case"BEFORE":e=c.firstChild;a("<div />").html(b).contents().each(function(){c.insertBefore(this,e)});break;case"AFTER":a("<div />").html(b).contents().each(function(){c.appendChild(this)});break;default:a(c).html(b)}})}function e(b,e){var j,k,g,i;j=b.getAttribute("data-ajax-confirm");if(j&&!window.confirm(j))return;k=a(b.getAttribute("data-ajax-loading"));i=b.getAttribute("data-ajax-loading-duration")||0;a.extend(e,{type:b.getAttribute("data-ajax-method")||undefined,url:b.getAttribute("data-ajax-url")||undefined,beforeSend:function(d){var a;f(d,g);a=c(b.getAttribute("data-ajax-begin"),["xhr"]).apply(this,arguments);a!==false&&k.show(i);return a},complete:function(){k.hide(i);c(b.getAttribute("data-ajax-complete"),["xhr","status"]).apply(this,arguments)},success:function(a,e,d){h(b,a,d.getResponseHeader("Content-Type")||"text/html");c(b.getAttribute("data-ajax-success"),["data","status","xhr"]).apply(this,arguments)},error:c(b.getAttribute("data-ajax-failure"),["xhr","status","error"])});e.data.push({name:"X-Requested-With",value:"XMLHttpRequest"});g=e.type.toUpperCase();if(!d(g)){e.type="POST";e.data.push({name:"X-HTTP-Method-Override",value:g})}a.ajax(e)}function i(c){var b=a(c).data(g);return!b||!b.validate||b.validate()}a("a[data-ajax=true]").live("click",function(a){a.preventDefault();e(this,{url:this.href,type:"GET",data:[]})});a("form[data-ajax=true] input[type=image]").live("click",function(c){var g=c.target.name,d=a(c.target),f=d.parents("form")[0],e=d.offset();a(f).data(b,[{name:g+".x",value:Math.round(c.pageX-e.left)},{name:g+".y",value:Math.round(c.pageY-e.top)}]);setTimeout(function(){a(f).removeData(b)},0)});a("form[data-ajax=true] :submit").live("click",function(c){var e=c.target.name,d=a(c.target).parents("form")[0];a(d).data(b,e?[{name:e,value:c.target.value}]:[]);setTimeout(function(){a(d).removeData(b)},0)});a("form[data-ajax=true]").live("submit",function(d){var c=a(this).data(b)||[];d.preventDefault();if(!i(this))return;e(this,{url:this.action,type:this.method||"GET",data:c.concat(a(this).serializeArray())})})})(jQuery);(function(a){a.extend(a.fn,{validate:function(c){if(!this.length){c&&c.debug&&window.console&&console.warn("nothing selected, can't validate, returning nothing");return}var b=a.data(this[0],"validator");if(b)return b;this.attr("novalidate","novalidate");b=new a.validator(c,this[0]);a.data(this[0],"validator",b);if(b.settings.onsubmit){var d=this.find("input, button");d.filter(".cancel").click(function(){b.cancelSubmit=true});b.settings.submitHandler&&d.filter(":submit").click(function(){b.submitButton=this});this.submit(function(d){b.settings.debug&&d.preventDefault();function c(){if(b.settings.submitHandler){if(b.submitButton)var c=a("<input type='hidden'/>").attr("name",b.submitButton.name).val(b.submitButton.value).appendTo(b.currentForm);b.settings.submitHandler.call(b,b.currentForm);b.submitButton&&c.remove();return false}return true}if(b.cancelSubmit){b.cancelSubmit=false;return c()}if(b.form()){if(b.pendingRequest){b.formSubmitted=true;return false}return c()}else{b.focusInvalid();return false}})}return b},valid:function(){if(a(this[0]).is("form"))return this.validate().form();else{var b=true,c=a(this[0].form).validate();this.each(function(){b&=c.element(this)});return b}},removeAttrs:function(d){var c={},b=this;a.each(d.split(/\s/),function(d,a){c[a]=b.attr(a);b.removeAttr(a)});return c},rules:function(i,e){var b=this[0];if(i){var f=a.data(b.form,"validator").settings,g=f.rules,d=a.validator.staticRules(b);switch(i){case"add":a.extend(d,a.validator.normalizeRule(e));g[b.name]=d;if(e.messages)f.messages[b.name]=a.extend(f.messages[b.name],e.messages);break;case"remove":if(!e){delete g[b.name];return d}var h={};a.each(e.split(/\s/),function(b,a){h[a]=d[a];delete d[a]});return h}}var c=a.validator.normalizeRules(a.extend({},a.validator.metadataRules(b),a.validator.classRules(b),a.validator.attributeRules(b),a.validator.staticRules(b)),b);if(c.required){var j=c.required;delete c.required;c=a.extend({required:j},c)}return c}});a.extend(a.expr[":"],{blank:function(b){return!a.trim(""+b.value)},filled:function(b){return!!a.trim(""+b.value)},unchecked:function(a){return!a.checked}});a.validator=function(b,c){this.settings=a.extend(true,{},a.validator.defaults,b);this.currentForm=c;this.init()};a.validator.format=function(c,b){if(arguments.length==1)return function(){var b=a.makeArray(arguments);b.unshift(c);return a.validator.format.apply(this,b)};if(arguments.length>2&&b.constructor!=Array)b=a.makeArray(arguments).slice(1);if(b.constructor!=Array)b=[b];a.each(b,function(a,b){c=c.replace(new RegExp("\\{"+a+"\\}","g"),b)});return c};a.extend(a.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:true,errorContainer:a([]),errorLabelContainer:a([]),onsubmit:true,ignore:":hidden",ignoreTitle:false,onfocusin:function(a){this.lastActive=a;if(this.settings.focusCleanup&&!this.blockFocusCleanup){this.settings.unhighlight&&this.settings.unhighlight.call(this,a,this.settings.errorClass,this.settings.validClass);this.addWrapper(this.errorsFor(a)).hide()}},onfocusout:function(a){!this.checkable(a)&&(a.name in this.submitted||!this.optional(a))&&this.element(a)},onkeyup:function(a){(a.name in this.submitted||a==this.lastElement)&&this.element(a)},onclick:function(a){if(a.name in this.submitted)this.element(a);else a.parentNode.name in this.submitted&&this.element(a.parentNode)},highlight:function(b,c,d){if(b.type==="radio")this.findByName(b.name).addClass(c).removeClass(d);else a(b).addClass(c).removeClass(d)},unhighlight:function(b,c,d){if(b.type==="radio")this.findByName(b.name).removeClass(c).addClass(d);else a(b).removeClass(c).addClass(d)}},setDefaults:function(b){a.extend(a.validator.defaults,b)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",accept:"Please enter a value with a valid extension.",maxlength:a.validator.format("Please enter no more than {0} characters."),minlength:a.validator.format("Please enter at least {0} characters."),rangelength:a.validator.format("Please enter a value between {0} and {1} characters long."),range:a.validator.format("Please enter a value between {0} and {1}."),max:a.validator.format("Please enter a value less than or equal to {0}."),min:a.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:false,prototype:{init:function(){this.labelContainer=a(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&this.labelContainer||a(this.currentForm);this.containers=a(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid={};this.reset();var d=this.groups={};a.each(this.settings.groups,function(c,b){a.each(b.split(/\s/),function(b,a){d[a]=c})});var c=this.settings.rules;a.each(c,function(d,b){c[d]=a.validator.normalizeRule(b)});function b(d){var b=a.data(this[0].form,"validator"),c="on"+d.type.replace(/^validate/,"");b.settings[c]&&b.settings[c].call(b,this[0],d)}a(this.currentForm).validateDelegate("[type='text'], [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ","focusin focusout keyup",b).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",b);this.settings.invalidHandler&&a(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){this.checkForm();a.extend(this.submitted,this.errorMap);this.invalid=a.extend({},this.errorMap);!this.valid()&&a(this.currentForm).triggerHandler("invalid-form",[this]);this.showErrors();return this.valid()},checkForm:function(){this.prepareForm();for(var a=0,b=this.currentElements=this.elements();b[a];a++)this.check(b[a]);return this.valid()},element:function(b){b=this.validationTargetFor(this.clean(b));this.lastElement=b;this.prepareElement(b);this.currentElements=a(b);var c=this.check(b);if(c)delete this.invalid[b.name];else this.invalid[b.name]=true;if(!this.numberOfInvalids())this.toHide=this.toHide.add(this.containers);this.showErrors();return c},showErrors:function(b){if(b){a.extend(this.errorMap,b);this.errorList=[];for(var c in b)this.errorList.push({message:b[c],element:this.findByName(c)[0]});this.successList=a.grep(this.successList,function(a){return!(a.name in b)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){a.fn.resetForm&&a(this.currentForm).resetForm();this.submitted={};this.lastElement=null;this.prepareForm();this.hideErrors();this.elements().removeClass(this.settings.errorClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(b){var a=0;for(var c in b)a++;return a},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return this.size()==0},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{a(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(b){}},findLastActive:function(){var b=this.lastActive;return b&&a.grep(this.errorList,function(a){return a.element.name==b.name}).length==1&&b},elements:function(){var c=this,b={};return a(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){!this.name&&c.settings.debug&&window.console&&console.error("%o has no name assigned",this);if(this.name in b||!c.objectLength(a(this).rules()))return false;b[this.name]=true;return true})},clean:function(b){return a(b)[0]},errors:function(){return a(this.settings.errorElement+"."+this.settings.errorClass,this.errorContext)},reset:function(){this.successList=[];this.errorList=[];this.errorMap={};this.toShow=a([]);this.toHide=a([]);this.currentElements=a([])},prepareForm:function(){this.reset();this.toHide=this.errors().add(this.containers)},prepareElement:function(a){this.reset();this.toHide=this.errorsFor(a)},check:function(b){b=this.validationTargetFor(this.clean(b));var f=a(b).rules(),c=false;for(var d in f){var g={method:d,parameters:f[d]};try{var e=a.validator.methods[d].call(this,b.value.replace(/\r/g,""),b,g.parameters);if(e=="dependency-mismatch"){c=true;continue}c=false;if(e=="pending"){this.toHide=this.toHide.not(this.errorsFor(b));return}if(!e){this.formatAndAdd(b,g);return false}}catch(h){this.settings.debug&&window.console&&console.log("exception occured when checking element "+b.id+", check the '"+g.method+"' method",h);throw h;}}if(c)return;this.objectLength(f)&&this.successList.push(b);return true},customMetaMessage:function(c,d){if(!a.metadata)return;var b=this.settings.meta?a(c).metadata()[this.settings.meta]:a(c).metadata();return b&&b.messages&&b.messages[d]},customMessage:function(c,b){var a=this.settings.messages[c];return a&&(a.constructor==String?a:a[b])},findDefined:function(){for(var a=0;a<arguments.length;a++)if(arguments[a]!==undefined)return arguments[a];return undefined},defaultMessage:function(b,c){return this.findDefined(this.customMessage(b.name,c),this.customMetaMessage(b,c),!this.settings.ignoreTitle&&b.title||undefined,a.validator.messages[c],"<strong>Warning: No message defined for "+b.name+"</strong>")},formatAndAdd:function(b,c){var a=this.defaultMessage(b,c.method),d=/\$?\{(\d+)\}/g;if(typeof a=="function")a=a.call(this,c.parameters,b);else if(d.test(a))a=jQuery.format(a.replace(d,"{$1}"),c.parameters);this.errorList.push({message:a,element:b});this.errorMap[b.name]=a;this.submitted[b.name]=a},addWrapper:function(a){if(this.settings.wrapper)a=a.add(a.parent(this.settings.wrapper));return a},defaultShowErrors:function(){for(var a=0;this.errorList[a];a++){var b=this.errorList[a];this.settings.highlight&&this.settings.highlight.call(this,b.element,this.settings.errorClass,this.settings.validClass);this.showLabel(b.element,b.message)}if(this.errorList.length)this.toShow=this.toShow.add(this.containers);if(this.settings.success)for(var a=0;this.successList[a];a++)this.showLabel(this.successList[a]);if(this.settings.unhighlight)for(var a=0,c=this.validElements();c[a];a++)this.settings.unhighlight.call(this,c[a],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return a(this.errorList).map(function(){return this.element})},showLabel:function(c,d){var b=this.errorsFor(c);if(b.length){b.removeClass(this.settings.validClass).addClass(this.settings.errorClass);b.attr("generated")&&b.html(d)}else{b=a("<"+this.settings.errorElement+"/>").attr({"for":this.idOrName(c),generated:true}).addClass(this.settings.errorClass).html(d||"");if(this.settings.wrapper)b=b.hide().show().wrap("<"+this.settings.wrapper+"/>").parent();if(!this.labelContainer.append(b).length)this.settings.errorPlacement?this.settings.errorPlacement(b,a(c)):b.insertAfter(c)}if(!d&&this.settings.success){b.text("");typeof this.settings.success=="string"?b.addClass(this.settings.success):this.settings.success(b)}this.toShow=this.toShow.add(b)},errorsFor:function(b){var c=this.idOrName(b);return this.errors().filter(function(){return a(this).attr("for")==c})},idOrName:function(a){return this.groups[a.name]||(this.checkable(a)?a.name:a.id||a.name)},validationTargetFor:function(a){if(this.checkable(a))a=this.findByName(a.name).not(this.settings.ignore)[0];return a},checkable:function(a){return/radio|checkbox/i.test(a.type)},findByName:function(b){var c=this.currentForm;return a(document.getElementsByName(b)).map(function(d,a){return a.form==c&&a.name==b&&a||null})},getLength:function(c,b){switch(b.nodeName.toLowerCase()){case"select":return a("option:selected",b).length;case"input":if(this.checkable(b))return this.findByName(b.name).filter(":checked").length}return c.length},depend:function(a,b){return this.dependTypes[typeof a]?this.dependTypes[typeof a](a,b):true},dependTypes:{"boolean":function(a){return a},string:function(c,b){return!!a(c,b.form).length},"function":function(b,a){return b(a)}},optional:function(b){return!a.validator.methods.required.call(this,a.trim(b.value),b)&&"dependency-mismatch"},startRequest:function(a){if(!this.pending[a.name]){this.pendingRequest++;this.pending[a.name]=true}},stopRequest:function(c,b){this.pendingRequest--;if(this.pendingRequest<0)this.pendingRequest=0;delete this.pending[c.name];if(b&&this.pendingRequest==0&&this.formSubmitted&&this.form()){a(this.currentForm).submit();this.formSubmitted=false}else if(!b&&this.pendingRequest==0&&this.formSubmitted){a(this.currentForm).triggerHandler("invalid-form",[this]);this.formSubmitted=false}},previousValue:function(b){return a.data(b,"previousValue")||a.data(b,"previousValue",{old:null,valid:true,message:this.defaultMessage(b,"remote")})}},classRuleSettings:{required:{required:true},email:{email:true},url:{url:true},date:{date:true},dateISO:{dateISO:true},dateDE:{dateDE:true},number:{number:true},numberDE:{numberDE:true},digits:{digits:true},creditcard:{creditcard:true}},addClassRules:function(b,c){b.constructor==String?this.classRuleSettings[b]=c:a.extend(this.classRuleSettings,b)},classRules:function(d){var c={},b=a(d).attr("class");b&&a.each(b.split(" "),function(){this in a.validator.classRuleSettings&&a.extend(c,a.validator.classRuleSettings[this])});return c},attributeRules:function(f){var c={},e=a(f);for(var b in a.validator.methods){var d;if(b==="required"&&typeof a.fn.prop==="function")d=e.prop(b);else d=e.attr(b);if(d)c[b]=d;else if(e[0].getAttribute("type")===b)c[b]=true}if(c.maxlength&&/-1|2147483647|524288/.test(c.maxlength))delete c.maxlength;return c},metadataRules:function(b){if(!a.metadata)return{};var c=a.data(b.form,"validator").settings.meta;return c?a(b).metadata()[c]:a(b).metadata()},staticRules:function(c){var d={},b=a.data(c.form,"validator");if(b.settings.rules)d=a.validator.normalizeRule(b.settings.rules[c.name])||{};return d},normalizeRules:function(b,c){a.each(b,function(f,d){if(d===false){delete b[f];return}if(d.param||d.depends){var e=true;switch(typeof d.depends){case"string":e=!!a(d.depends,c.form).length;break;case"function":e=d.depends.call(c,c)}if(e)b[f]=d.param!==undefined?d.param:true;else delete b[f]}});a.each(b,function(e,d){b[e]=a.isFunction(d)?d(c):d});a.each(["minlength","maxlength","min","max"],function(){if(b[this])b[this]=Number(b[this])});a.each(["rangelength","range"],function(){if(b[this])b[this]=[Number(b[this][0]),Number(b[this][1])]});if(a.validator.autoCreateRanges){if(b.min&&b.max){b.range=[b.min,b.max];delete b.min;delete b.max}if(b.minlength&&b.maxlength){b.rangelength=[b.minlength,b.maxlength];delete b.minlength;delete b.maxlength}}if(b.messages)delete b.messages;return b},normalizeRule:function(b){if(typeof b=="string"){var c={};a.each(b.split(/\s/),function(){c[this]=true});b=c}return b},addMethod:function(b,d,c){a.validator.methods[b]=d;a.validator.messages[b]=c!=undefined?c:a.validator.messages[b];d.length<3&&a.validator.addClassRules(b,a.validator.normalizeRule(b))},methods:{required:function(c,b,e){if(!this.depend(e,b))return"dependency-mismatch";switch(b.nodeName.toLowerCase()){case"select":var d=a(b).val();return d&&d.length>0;case"input":if(this.checkable(b))return this.getLength(c,b)>0;default:return a.trim(c).length>0}},remote:function(f,b,e){if(this.optional(b))return"dependency-mismatch";var d=this.previousValue(b);if(!this.settings.messages[b.name])this.settings.messages[b.name]={};d.originalMessage=this.settings.messages[b.name].remote;this.settings.messages[b.name].remote=d.message;e=typeof e=="string"&&{url:e}||e;if(this.pending[b.name])return"pending";if(d.old===f)return d.valid;d.old=f;var c=this;this.startRequest(b);var g={};g[b.name]=f;a.ajax(a.extend(true,{url:e,mode:"abort",port:"validate"+b.name,dataType:"json",data:g,type:"POST",success:function(e){c.settings.messages[b.name].remote=d.originalMessage;e=a.extend({Response:{Value:{Success:false}}},e);e=e.Response.Value;b&&b.length>0&&a(b).removeData("valmsg-success");var h=e.Success===true;if(h){var j=c.formSubmitted;c.prepareElement(b);c.formSubmitted=j;c.successList.push(b);e.Message&&a(b).data("valmsg-success",e.Message);c.showErrors()}else{var i={},g=e.Message||c.defaultMessage(b,"remote");i[b.name]=d.message=a.isFunction(g)?g(f):g;c.showErrors(i)}d.valid=h;c.stopRequest(b,h)}},e));return"pending"},minlength:function(d,b,c){return this.optional(b)||this.getLength(a.trim(d),b)>=c},maxlength:function(d,b,c){return this.optional(b)||this.getLength(a.trim(d),b)<=c},rangelength:function(e,b,d){var c=this.getLength(a.trim(e),b);return this.optional(b)||c>=d[0]&&c<=d[1]},min:function(c,a,b){return this.optional(a)||c>=b},max:function(c,a,b){return this.optional(a)||c<=b},range:function(b,c,a){return this.optional(c)||b>=a[0]&&b<=a[1]},email:function(b,a){return this.optional(a)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(b)},url:function(b,a){return this.optional(a)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(b)},date:function(b,a){return this.optional(a)||!/Invalid|NaN/.test(new Date(b))},dateISO:function(b,a){return this.optional(a)||/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(b)},number:function(b,a){return this.optional(a)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(b)},digits:function(b,a){return this.optional(a)||/^\d+$/.test(b)},creditcard:function(a,f){if(this.optional(f))return"dependency-mismatch";if(/[^0-9 -]+/.test(a))return false;var e=0,b=0,c=false;a=a.replace(/\D/g,"");for(var d=a.length-1;d>=0;d--){var g=a.charAt(d),b=parseInt(g,10);if(c)if((b*=2)>9)b-=9;e+=b;c=!c}return e%10==0},accept:function(c,b,a){a=typeof a=="string"?a.replace(/,/g,"|"):"png|jpe?g|gif";return this.optional(b)||c.match(new RegExp(".("+a+")$","i"))},equalTo:function(e,b,d){var c=a(d).unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){a(b).valid()});return e==c.val()}}});a.format=a.validator.format})(jQuery);(function(b){var a={};if(b.ajaxPrefilter)b.ajaxPrefilter(function(c,e,d){var b=c.port;if(c.mode=="abort"){a[b]&&a[b].abort();a[b]=d}});else{var c=b.ajax;b.ajax=function(d){var f=("mode"in d?d:b.ajaxSettings).mode,e=("port"in d?d:b.ajaxSettings).port;if(f=="abort"){a[e]&&a[e].abort();return a[e]=c.apply(this,arguments)}return c.apply(this,arguments)}}})(jQuery);(function(a){!jQuery.event.special.focusin&&!jQuery.event.special.focusout&&document.addEventListener&&a.each({focus:"focusin",blur:"focusout"},function(c,b){a.event.special[b]={setup:function(){this.addEventListener(c,d,true)},teardown:function(){this.removeEventListener(c,d,true)},handler:function(c){arguments[0]=a.event.fix(c);arguments[0].type=b;return a.event.handle.apply(this,arguments)}};function d(c){c=a.event.fix(c);c.type=b;return a.event.handle.call(this,c)}});a.extend(a.fn,{validateDelegate:function(b,d,c){return this.bind(d,function(e){var d=a(e.target);if(d.is(b))return c.apply(d,arguments)})}})})(jQuery);
/*!
 ** Unobtrusive validation support library for jQuery and jQuery Validate
 ** Copyright (C) Microsoft Corporation. All rights reserved.
 */
(function(a){var d=a.validator,b,f="unobtrusiveValidation";function c(a,b,c){a.rules[b]=c;if(a.message)a.messages[b]=a.message}function i(a){return a.replace(/^\s+|\s+$/g,"").split(/\s*,\s*/g)}function g(a){return a.substr(0,a.lastIndexOf(".")+1)}function e(a,b){if(a.indexOf("*.")===0)a=a.replace("*.",b);return a}function l(c,d){var b=a(this).find("[data-valmsg-for='"+d[0].name+"']"),e=a.parseJSON(b.attr("data-valmsg-replace"))!==false;b.removeClass("field-validation-valid field-validation-success").addClass("field-validation-error");c.data("unobtrusiveContainer",b);if(e){b.empty();c.removeClass("input-validation-error").appendTo(b)}else c.hide()}function k(e,d){var c=a(this).find("[data-valmsg-summary=true]"),b=c.find("ul");if(b&&b.length&&d.errorList.length){b.empty();c.addClass("validation-summary-errors").removeClass("validation-summary-valid");a.each(d.errorList,function(){a("<li />").html(this.message).appendTo(b)})}}function j(d){var b=d.data("unobtrusiveContainer"),e=a.parseJSON(b.attr("data-valmsg-replace")),c=a(this).find("[name='"+b.data("valmsg-for")+"']");if(b){b.addClass("field-validation-valid").removeClass("field-validation-error");d.removeData("unobtrusiveContainer");e&&b.empty();c&&c.data("valmsg-success")&&b.addClass("field-validation-success").text(c.data("valmsg-success"))}}function h(d){var b=a(d),c=b.data(f);if(!c){c={options:{errorClass:"input-validation-error",errorElement:"span",errorPlacement:a.proxy(l,d),invalidHandler:a.proxy(k,d),messages:{},rules:{},success:a.proxy(j,d)},attachValidation:function(){b.validate(this.options)},validate:function(){b.validate();return b.valid()}};b.data(f,c)}return c}d.unobtrusive={adapters:[],parseElement:function(b,i){var d=a(b),f=d.parents("form")[0],c,e,g;if(!f)return;c=h(f);c.options.rules[b.name]=e={};c.options.messages[b.name]=g={};a.each(this.adapters,function(){var c="data-val-"+this.name,i=d.attr(c),h={};if(i!==undefined){c+="-";a.each(this.params,function(){h[this]=d.attr(c+this)});this.adapt({element:b,form:f,message:i,params:h,rules:e,messages:g})}});jQuery.extend(e,{__dummy__:true});!i&&c.attachValidation()},parse:function(b){a(b).find(":input[data-val=true]").each(function(){d.unobtrusive.parseElement(this,true)});a("form").each(function(){var a=h(this);a&&a.attachValidation()})}};b=d.unobtrusive.adapters;b.add=function(c,a,b){if(!b){b=a;a=[]}this.push({name:c,params:a,adapt:b});return this};b.addBool=function(a,b){return this.add(a,function(d){c(d,b||a,true)})};b.addMinMax=function(e,g,f,a,d,b){return this.add(e,[d||"min",b||"max"],function(b){var e=b.params.min,d=b.params.max;if(e&&d)c(b,a,[e,d]);else if(e)c(b,g,e);else d&&c(b,f,d)})};b.addSingleVal=function(a,b,d){return this.add(a,[b||"val"],function(e){c(e,d||a,e.params[b])})};d.addMethod("__dummy__",function(){return true});d.addMethod("regex",function(b,c,d){var a;if(this.optional(c))return true;a=new RegExp(d).exec(b);return a&&a.index===0&&a[0].length===b.length});b.addSingleVal("accept","exts").addSingleVal("regex","pattern");b.addBool("creditcard").addBool("date").addBool("digits").addBool("email").addBool("number").addBool("url");b.addMinMax("length","minlength","maxlength","rangelength").addMinMax("range","min","max","range");b.add("equalto",["other"],function(b){var h=g(b.element.name),i=b.params.other,d=e(i,h),f=a(b.form).find(":input[name="+d+"]")[0];c(b,"equalTo",f)});b.add("required",function(a){(a.element.tagName.toUpperCase()!=="INPUT"||a.element.type.toUpperCase()!=="CHECKBOX")&&c(a,"required",true)});b.add("remote",["url","type","additionalfields"],function(b){var d={url:b.params.url,type:b.params.type||"POST",data:{}},f=g(b.element.name);a.each(i(b.params.additionalfields||b.element.name),function(h,g){var c=e(g,f);d.data[c]=function(){return a(b.form).find(":input[name='"+c+"']").val()}});c(b,"remote",d)});a(function(){d.unobtrusive.parse(document)})})(jQuery);(function(a){a.tools=a.tools||{version:"1.2.3a"};a.tools.scrollable={conf:{circular:false,clonedClass:"cloned",disabledClass:"disabled",easing:"swing",initialIndex:0,item:null,items:".items",keyboard:true,mousewheel:false,next:".next",prev:".prev",speed:400,clickSpeed:150,vertical:false,wheelSpeed:0,itemCount:4,pageSize:1}};function c(d,b){var c=a(b);return c.length<2?c:d.parent().find(b)}var b;function d(g,e){var d=this,l=g.add(d),f=g.children(),h=0,k=e.vertical;if(!b)b=d;if(f.length>1)f=a(e.items,g);a.extend(d,{getConf:function(){return e},getIndex:function(){return h},getSize:function(){return d.getItems().size()},getNaviButtons:function(){return j.add(i)},getRoot:function(){return g},getItemWrap:function(){return f},getItems:function(){return f.children(e.item).not("."+e.clonedClass)},move:function(a,b){return e.circular||h+a>=0&&h+a<=d.getSize()-e.itemCount?d.seekTo(h+a,b):d},next:function(a){return d.move(1,a)},prev:function(a){return d.move(-1,a)},begin:function(a){return d.seekTo(0,a)},end:function(a){return d.seekTo(d.getSize()-e.itemCount+1,a)},focus:function(){b=d;return d},addItem:function(b){b=a(b);if(!e.circular)f.append(b);else{a(".cloned:last").before(b);a(".cloned:first").replaceWith(b.clone().addClass(e.clonedClass))}l.trigger("onAddItem",[b]);return d},removeItem:function(a){d.getItems().eq(a).remove();return d},replaceItems:function(b,a){d.getItems().remove();f.html(b);(typeof a==="undefined"||a)&&d.begin(e.speed);return d},seekTo:function(c,g,j){if(e.circular&&c===0&&h==-1&&g!==0)return d;if(!e.circular&&c<0||!e.circular&&c>=d.getSize()||c<-1)return d;var i=c;if(c.jquery)c=d.getItems().index(c);else i=d.getItems().eq(c);var m=a.Event("onBeforeSeek");if(!j){l.trigger(m,[c,g]);if(m.isDefaultPrevented()||!i.length)return d}var n=k?{top:-i.position().top}:{left:-i.position().left};h=c;b=d;if(g===undefined)g=e.speed;f.animate(n,g,e.easing,j||function(){l.trigger("onSeek",[c])});return d}});a.each(["onBeforeSeek","onSeek","onAddItem"],function(c,b){a.isFunction(e[b])&&a(d).bind(b,e[b]);d[b]=function(c){a(d).bind(b,c);return d}});if(e.circular){var m=null,n=null;n=d.getItems().slice(0,e.itemCount).clone().addClass(e.clonedClass).appendTo(f);m=d.getItems().slice(-1).clone().addClass(e.clonedClass).prependTo(f);d.onBeforeSeek(function(b,c,a){if(b.isDefaultPrevented())return;if(c==-1){d.seekTo(m.eq(-1),a,function(){d.seekTo(d.getSize()-1,0,function(){})});return b.preventDefault()}else c==d.getSize()&&d.seekTo(n.eq(0),a,function(){d.begin(0)})});d.seekTo(0,0)}var j=c(g,e.prev).click(function(){if(!d.stopped)if(!d.navigator)d.prev(e.clickSpeed);else{var a=d.navigator;d.move(-1*a.conf.pageSize,e.clickSpeed)}}),i=c(g,e.next).click(function(){if(!d.stopped)if(!d.navigator)d.next(e.clickSpeed);else{var a=d.navigator;if(d.getIndex()+a.conf.pageSize>=d.getSize())d.move(d.getSize()-a.conf.pageSize-1,e.clickSpeed);else d.move(a.conf.pageSize,e.clickSpeed)}});if(!e.circular)d.onBeforeSeek(function(b,a){window.setTimeout(function(){if(!b.isDefaultPrevented())if(d.getSize()<=e.itemCount){j.addClass(e.disabledClass);i.addClass(e.disabledClass)}else if(!e.circular&&!d.navigator){j.toggleClass(e.disabledClass,a<=0);i.toggleClass(e.disabledClass,a>=d.getSize()-e.itemCount)}else if(d.navigator){var c=d.navigator;j.toggleClass(e.disabledClass,a<c.conf.pageSize);i.toggleClass(e.disabledClass,a+c.conf.pageSize>d.getSize()-c.conf.pageSize)}},1)});e.mousewheel&&a.fn.mousewheel&&g.mousewheel(function(b,a){if(e.mousewheel){d.move(a<0?1:-1,e.wheelSpeed||50);return false}});e.keyboard&&a(document).bind("keydown.scrollable",function(c){if(!e.keyboard||c.altKey||c.ctrlKey||a(c.target).is(":input")||d.stopped)return;if(e.keyboard!="static"&&b!=d)return;var f=c.keyCode;if(k&&(f==38||f==40)){d.move(f==38?-1:1,e.clickSpeed);return c.preventDefault()}if(!k&&(f==37||f==39)){d.move(f==37?-1:1,e.clickSpeed);return c.preventDefault()}});if(e.initialIndex>0)d.seekTo(e.initialIndex);else setTimeout(function(){var a=Math.min(e.initialIndex,Math.max(0,d.getSize()-e.itemCount));d.seekTo(a)},e.speed)}a.fn.scrollable=function(c){var b=this.data("scrollable");if(b)return b;c=a.extend({},a.tools.scrollable.conf,c);this.each(function(){b=new d(a(this),c);a(this).data("scrollable",b)});return c.api?b:this}})(jQuery);(function(a){var b=a.tools.scrollable;b.autoscroll={conf:{autoplay:true,interval:3e3,autopause:true}};a.fn.autoscroll=function(c){if(typeof c=="number")c={interval:c};var d=a.extend({},b.autoscroll.conf,c),e;this.each(function(){var b=a(this).data("scrollable");if(b)e=b;var c,f=false;b.stopped=false;b.play=function(){if(c||b.stopped)return;c=setInterval(function(){var c=b.getIndex(),d=b.getSize(),a=1;if(b.navigator)a=b.navigator.conf.pageSize;else a=b.getConf().pageSize;if(c>=d-a)b.seekTo(0);else b.seekTo(c+a)},d.interval)};b.pause=function(){c=clearInterval(c)};b.stop=function(){b.pause();b.stopped=true};b.restart=function(){b.stopped=false;b.play()};d.autopause&&b.getRoot().add(b.getNaviButtons()).hover(b.pause,b.play);d.autoplay&&b.play()});return d.api?e:this}})(jQuery);(function(a){var b=a.tools.scrollable;b.navigator={conf:{navi:".navi",naviItem:null,activeClass:"active",indexed:false,idPrefix:null,pageSize:0,history:false}};function c(d,b){var c=a(b);return c.length<2?c:d.parent().find(b)}a.fn.navigator=function(d){if(typeof d=="string")d={navi:d};d=a.extend({},b.navigator.conf,d);var e;this.each(function(){var b=a(this).data("scrollable"),h=d.navi.jquery?d.navi:c(b.getRoot(),d.navi),m=b.getNaviButtons(),i=d.activeClass,g=d.history&&a.fn.history;b.navigator={conf:d};if(b)e=b;b.getNaviButtons=function(){return m.add(h)};function l(a,d,c){b.seekTo(d);if(g){if(location.hash)location.hash=a.attr("href").replace("#","")}else return c.preventDefault()}function f(){return h.find(d.naviItem||"> *")}function k(b){var c=a("<"+(d.naviItem||"a")+"/>").click(function(c){l(a(this),b,c)}).attr("href","#"+b);b===0&&c.addClass(i);d.indexed&&c.text(b+1);d.idPrefix&&c.attr("id",d.idPrefix+b);d.pageSize>0&&b%d.pageSize!=0&&c.hide();return c.appendTo(h)}if(f().length)f().each(function(b){a(this).click(function(c){l(a(this),b,c)})});else a.each(b.getItems(),function(a){k(a)});b.onBeforeSeek(function(b,a){setTimeout(function(){if(!b.isDefaultPrevented()){var c=f().eq(a);!b.isDefaultPrevented()&&c.length&&f().removeClass(i).eq(a).addClass(i)}},1)});function j(c,b){var a=f().eq(b.replace("#",""));if(!a.length)a=f().filter("[href="+b+"]");a.click()}b.onAddItem(function(c,a){a=k(b.getItems().index(a));g&&a.history(j)});g&&f().history(j)});return d.api?e:this}})(jQuery);(function(a){a.jGrowl=function(c,b){a("#jGrowl").size()==0&&a('<div id="jGrowl"></div>').addClass(b&&b.position?b.position:a.jGrowl.defaults.position).appendTo("body");a("#jGrowl").jGrowl(c,b)};a.fn.jGrowl=function(b,d){if(a.isFunction(this.each)){var c=arguments;return this.each(function(){var e=this;if(a(this).data("jGrowl.instance")==undefined){a(this).data("jGrowl.instance",a.extend(new a.fn.jGrowl,{notifications:[],element:null,interval:null}));a(this).data("jGrowl.instance").startup(this)}if(a.isFunction(a(this).data("jGrowl.instance")[b]))a(this).data("jGrowl.instance")[b].apply(a(this).data("jGrowl.instance"),a.makeArray(c).slice(1));else a(this).data("jGrowl.instance").create(b,d)})}};a.extend(a.fn.jGrowl.prototype,{defaults:{pool:0,header:"",group:"",sticky:false,position:"bottom-left",glue:"after",theme:"default",themeState:"highlight",corners:"10px",check:250,life:3e3,closeDuration:"normal",openDuration:"normal",easing:"swing",closer:true,closeTemplate:"&times;",closerTemplate:"<div>[ close all ]</div>",log:function(){},beforeOpen:function(){},afterOpen:function(){},open:function(){},beforeClose:function(){},close:function(){},animateOpen:{opacity:"show"},animateClose:{opacity:"hide"}},notifications:[],element:null,interval:null,create:function(c,b){var b=a.extend({},this.defaults,b);if(typeof b.speed!=="undefined"){b.openDuration=b.speed;b.closeDuration=b.speed}this.notifications.push({message:c,options:b});b.log.apply(this.element,[this.element,c,b])},render:function(c){var d=this,e=c.message,b=c.options,c=a('<div class="jGrowl-notification '+b.themeState+" ui-corner-all"+(b.group!=undefined&&b.group!=""?" "+b.group:"")+'"><div class="jGrowl-close">'+b.closeTemplate+'</div><div class="jGrowl-header">'+b.header+'</div><div class="jGrowl-message">'+e+"</div></div>").data("jGrowl",b).addClass(b.theme).children("div.jGrowl-close").bind("click.jGrowl",function(){a(this).parent().trigger("jGrowl.close")}).parent();if(Modernizr.touch)c.on("click",function(){c.trigger("jGrowl.close")});a(c).bind("mouseover.jGrowl",function(){a("div.jGrowl-notification",d.element).data("jGrowl.pause",true)}).bind("mouseout.jGrowl",function(){a("div.jGrowl-notification",d.element).data("jGrowl.pause",false)}).bind("jGrowl.beforeOpen",function(){b.beforeOpen.apply(c,[c,e,b,d.element])!=false&&a(this).trigger("jGrowl.open")}).bind("jGrowl.open",function(){if(b.open.apply(c,[c,e,b,d.element])!=false){if(b.glue=="after")a("div.jGrowl-notification:last",d.element).after(c);else a("div.jGrowl-notification:first",d.element).before(c);a(this).animate(b.animateOpen,b.openDuration,b.easing,function(){a.browser.msie&&(parseInt(a(this).css("opacity"),10)===1||parseInt(a(this).css("opacity"),10)===0)&&this.style.removeAttribute("filter");a(this).data("jGrowl").created=new Date;a(this).trigger("jGrowl.afterOpen")})}}).bind("jGrowl.afterOpen",function(){b.afterOpen.apply(c,[c,e,b,d.element])}).bind("jGrowl.beforeClose",function(){b.beforeClose.apply(c,[c,e,b,d.element])!=false&&a(this).trigger("jGrowl.close")}).bind("jGrowl.close",function(){a(this).data("jGrowl.pause",true);a(this).animate(b.animateClose,b.closeDuration,b.easing,function(){a(this).remove();var f=b.close.apply(c,[c,e,b,d.element]);a.isFunction(f)&&f.apply(c,[c,e,b,d.element])})}).trigger("jGrowl.beforeOpen");b.corners!=""&&a.fn.corner!=undefined&&a(c).corner(b.corners);a("div.jGrowl-notification:parent",d.element).size()>1&&a("div.jGrowl-closer",d.element).size()==0&&this.defaults.closer!=false&&a(this.defaults.closerTemplate).addClass("jGrowl-closer ui-state-highlight ui-corner-all").addClass(this.defaults.theme).appendTo(d.element).animate(this.defaults.animateOpen,this.defaults.speed,this.defaults.easing).bind("click.jGrowl",function(){a(this).siblings().trigger("jGrowl.beforeClose");a.isFunction(d.defaults.closer)&&d.defaults.closer.apply(a(this).parent()[0],[a(this).parent()[0]])})},update:function(){a(this.element).find("div.jGrowl-notification:parent").each(function(){a(this).data("jGrowl")!=undefined&&a(this).data("jGrowl").created!=undefined&&a(this).data("jGrowl").created.getTime()+parseInt(a(this).data("jGrowl").life)<+new Date&&a(this).data("jGrowl").sticky!=true&&(a(this).data("jGrowl.pause")==undefined||a(this).data("jGrowl.pause")!=true)&&a(this).trigger("jGrowl.beforeClose")});this.notifications.length>0&&(this.defaults.pool==0||a(this.element).find("div.jGrowl-notification:parent").size()<this.defaults.pool)&&this.render(this.notifications.shift());a(this.element).find("div.jGrowl-notification:parent").size()<2&&a(this.element).find("div.jGrowl-closer").animate(this.defaults.animateClose,this.defaults.speed,this.defaults.easing,function(){a(this).remove()})},startup:function(b){this.element=a(b).addClass("jGrowl").append('<div class="jGrowl-notification"></div>');this.interval=setInterval(function(){a(b).data("jGrowl.instance").update()},parseInt(this.defaults.check));a.browser.msie&&parseInt(a.browser.version)<7&&!window.XMLHttpRequest&&a(this.element).addClass("ie6")},shutdown:function(){a(this.element).removeClass("jGrowl").find("div.jGrowl-notification").remove();clearInterval(this.interval)},close:function(){a(this.element).find("div.jGrowl-notification").each(function(){a(this).trigger("jGrowl.beforeClose")})}});a.jGrowl.defaults=a.fn.jGrowl.prototype.defaults})(jQuery);var swfobject=function(){var c="undefined",g="object",J="Shockwave Flash",U="ShockwaveFlash.ShockwaveFlash",t="application/x-shockwave-flash",H="SWFObjectExprInst",M="onreadystatechange",d=window,b=document,j=navigator,K=false,u=[Q],i=[],r=[],n=[],o,s,w,D,k=false,p=false,f,x,G=true,a=function(){var l=typeof b.getElementById!=c&&typeof b.getElementsByTagName!=c&&typeof b.createElement!=c,f=j.userAgent.toLowerCase(),h=j.platform.toLowerCase(),n=h?/win/.test(h):/win/.test(f),m=h?/mac/.test(h):/mac/.test(f),o=/webkit/.test(f)?parseFloat(f.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,i=false,e=[0,0,0],a=null;if(typeof j.plugins!=c&&typeof j.plugins[J]==g){a=j.plugins[J].description;if(a&&!(typeof j.mimeTypes!=c&&j.mimeTypes[t]&&!j.mimeTypes[t].enabledPlugin)){K=true;i=false;a=a.replace(/^.*\s+(\S+\s+\S+$)/,"$1");e[0]=parseInt(a.replace(/^(.*)\..*$/,"$1"),10);e[1]=parseInt(a.replace(/^.*\.(.*)\s.*$/,"$1"),10);e[2]=/[a-zA-Z]/.test(a)?parseInt(a.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}}else if(typeof d.ActiveXObject!=c)try{var k=new ActiveXObject(U);if(k){a=k.GetVariable("$version");if(a){i=true;a=a.split(" ")[1].split(",");e=[parseInt(a[0],10),parseInt(a[1],10),parseInt(a[2],10)]}}}catch(p){}return{w3:l,pv:e,wk:o,ie:i,win:n,mac:m}}(),W=function(){if(!a.w3)return;(typeof b.readyState!=c&&b.readyState=="complete"||typeof b.readyState==c&&(b.getElementsByTagName("body")[0]||b.body))&&m();if(!k){typeof b.addEventListener!=c&&b.addEventListener("DOMContentLoaded",m,false);if(a.ie&&a.win){b.attachEvent(M,function(){if(b.readyState=="complete"){b.detachEvent(M,arguments.callee);m()}});d==top&&(function(){if(k)return;try{b.documentElement.doScroll("left")}catch(a){setTimeout(arguments.callee,0);return}m()})()}a.wk&&(function(){if(k)return;if(!/loaded|complete/.test(b.readyState)){setTimeout(arguments.callee,0);return}m()})();I(m)}}();function m(){if(k)return;try{var c=b.getElementsByTagName("body")[0].appendChild(h("span"));c.parentNode.removeChild(c)}catch(e){return}k=true;for(var d=u.length,a=0;a<d;a++)u[a]()}function E(a){if(k)a();else u[u.length]=a}function I(a){if(typeof d.addEventListener!=c)d.addEventListener("load",a,false);else if(typeof b.addEventListener!=c)b.addEventListener("load",a,false);else if(typeof d.attachEvent!=c)R(d,"onload",a);else if(typeof d.onload=="function"){var e=d.onload;d.onload=function(){e();a()}}else d.onload=a}function Q(){if(K)T();else z()}function T(){var f=b.getElementsByTagName("body")[0],e=h(g);e.setAttribute("type",t);var d=f.appendChild(e);if(d){var i=0;(function(){if(typeof d.GetVariable!=c){var b=d.GetVariable("$version");if(b){b=b.split(" ")[1].split(",");a.pv=[parseInt(b[0],10),parseInt(b[1],10),parseInt(b[2],10)]}}else if(i<10){i++;setTimeout(arguments.callee,10);return}f.removeChild(e);d=null;z()})()}else z()}function z(){var o=i.length;if(o>0)for(var g=0;g<o;g++){var h=i[g].id,f=i[g].callbackFn,d={success:false,id:h};if(a.pv[0]>0){var b=e(h);if(b)if(q(i[g].swfVersion)&&!(a.wk&&a.wk<312)){l(h,true);if(f){d.success=true;d.ref=C(h);f(d)}}else if(i[g].expressInstall&&v()){var j={};j.data=i[g].expressInstall;j.width=b.getAttribute("width")||"0";j.height=b.getAttribute("height")||"0";if(b.getAttribute("class"))j.styleclass=b.getAttribute("class");if(b.getAttribute("align"))j.align=b.getAttribute("align");for(var p={},m=b.getElementsByTagName("param"),r=m.length,k=0;k<r;k++)if(m[k].getAttribute("name").toLowerCase()!="movie")p[m[k].getAttribute("name")]=m[k].getAttribute("value");A(j,p,h,f)}else{S(b);f&&f(d)}}else{l(h,true);if(f){var n=C(h);if(n&&typeof n.SetVariable!=c){d.success=true;d.ref=n}f(d)}}}}function C(f){var b=null,a=e(f);if(a&&a.nodeName=="OBJECT")if(typeof a.SetVariable!=c)b=a;else{var d=a.getElementsByTagName(g)[0];if(d)b=d}return b}function v(){return!p&&q("6.0.65")&&(a.win||a.mac)&&!(a.wk&&a.wk<312)}function A(g,j,i,n){p=true;w=n||null;D={success:false,id:i};var f=e(i);if(f){if(f.nodeName=="OBJECT"){o=y(f);s=null}else{o=f;s=i}g.id=H;if(typeof g.width==c||!/%$/.test(g.width)&&parseInt(g.width,10)<310)g.width="310";if(typeof g.height==c||!/%$/.test(g.height)&&parseInt(g.height,10)<137)g.height="137";b.title=b.title.slice(0,47)+" - Flash Player Installation";var m=a.ie&&a.win?"ActiveX":"PlugIn",k="MMredirectURL="+d.location.toString().replace(/&/g,"%26")+"&MMplayerType="+m+"&MMdoctitle="+b.title;if(typeof j.flashvars!=c)j.flashvars+="&"+k;else j.flashvars=k;if(a.ie&&a.win&&f.readyState!=4){var l=h("div");i+="SWFObjectNew";l.setAttribute("id",i);f.parentNode.insertBefore(l,f);f.style.display="none";(function(){if(f.readyState==4)f.parentNode.removeChild(f);else setTimeout(arguments.callee,10)})()}B(g,j,i)}}function S(b){if(a.ie&&a.win&&b.readyState!=4){var c=h("div");b.parentNode.insertBefore(c,b);c.parentNode.replaceChild(y(b),c);b.style.display="none";(function(){if(b.readyState==4)b.parentNode.removeChild(b);else setTimeout(arguments.callee,10)})()}else b.parentNode.replaceChild(y(b),b)}function y(e){var d=h("div");if(a.win&&a.ie)d.innerHTML=e.innerHTML;else{var f=e.getElementsByTagName(g)[0];if(f){var b=f.childNodes;if(b)for(var i=b.length,c=0;c<i;c++)!(b[c].nodeType==1&&b[c].nodeName=="PARAM")&&!(b[c].nodeType==8)&&d.appendChild(b[c].cloneNode(true))}}return d}function B(b,i,q){var n,l=e(q);if(a.wk&&a.wk<312)return n;if(l){if(typeof b.id==c)b.id=q;if(a.ie&&a.win){var o="";for(var d in b)if(b[d]!=Object.prototype[d])if(d.toLowerCase()=="data")i.movie=b[d];else if(d.toLowerCase()=="styleclass")o+=' class="'+b[d]+'"';else if(d.toLowerCase()!="classid")o+=" "+d+'="'+b[d]+'"';var p="";for(var m in i)if(i[m]!=Object.prototype[m])p+='<param name="'+m+'" value="'+i[m]+'" />';l.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+o+">"+p+"</object>";r[r.length]=b.id;n=e(b.id)}else{var j=h(g);j.setAttribute("type",t);for(var f in b)if(b[f]!=Object.prototype[f])if(f.toLowerCase()=="styleclass")j.setAttribute("class",b[f]);else f.toLowerCase()!="classid"&&j.setAttribute(f,b[f]);for(var k in i)i[k]!=Object.prototype[k]&&k.toLowerCase()!="movie"&&P(j,k,i[k]);l.parentNode.replaceChild(j,l);n=j}}return n}function P(d,b,c){var a=h("param");a.setAttribute("name",b);a.setAttribute("value",c);d.appendChild(a)}function N(c){var b=e(c);if(b&&b.nodeName=="OBJECT")if(a.ie&&a.win){b.style.display="none";(function(){if(b.readyState==4)O(c);else setTimeout(arguments.callee,10)})()}else b.parentNode.removeChild(b)}function O(c){var a=e(c);if(a){for(var b in a)if(typeof a[b]=="function")a[b]=null;a.parentNode.removeChild(a)}}function e(c){var a=null;try{a=b.getElementById(c)}catch(d){}return a}function h(a){return b.createElement(a)}function R(c,a,b){c.attachEvent(a,b);n[n.length]=[c,a,b]}function q(d){var c=a.pv,b=d.split(".");b[0]=parseInt(b[0],10);b[1]=parseInt(b[1],10)||0;b[2]=parseInt(b[2],10)||0;return c[0]>b[0]||c[0]==b[0]&&c[1]>b[1]||c[0]==b[0]&&c[1]==b[1]&&c[2]>=b[2]?true:false}function L(k,l,d,m){if(a.ie&&a.mac)return;var j=b.getElementsByTagName("head")[0];if(!j)return;var e=d&&typeof d=="string"?d:"screen";if(m){f=null;x=null}if(!f||x!=e){var i=h("style");i.setAttribute("type","text/css");i.setAttribute("media",e);f=j.appendChild(i);if(a.ie&&a.win&&typeof b.styleSheets!=c&&b.styleSheets.length>0)f=b.styleSheets[b.styleSheets.length-1];x=e}if(a.ie&&a.win)f&&typeof f.addRule==g&&f.addRule(k,l);else f&&typeof b.createTextNode!=c&&f.appendChild(b.createTextNode(k+" {"+l+"}"))}function l(a,c){if(!G)return;var b=c?"visible":"hidden";if(k&&e(a))e(a).style.visibility=b;else L("#"+a,"visibility:"+b)}function F(a){var d=/[\\\"<>\.;]/,b=d.exec(a)!=null;return b&&typeof encodeURIComponent!=c?encodeURIComponent(a):a}var V=function(){a.ie&&a.win&&window.attachEvent("onunload",function(){for(var d=n.length,b=0;b<d;b++)n[b][0].detachEvent(n[b][1],n[b][2]);for(var g=r.length,c=0;c<g;c++)N(r[c]);for(var f in a)a[f]=null;a=null;for(var e in swfobject)swfobject[e]=null;swfobject=null})}();return{registerObject:function(c,e,f,d){if(a.w3&&c&&e){var b={};b.id=c;b.swfVersion=e;b.expressInstall=f;b.callbackFn=d;i[i.length]=b;l(c,false)}else d&&d({success:false,id:c})},getObjectById:function(b){if(a.w3)return C(b)},embedSWF:function(n,b,j,k,o,m,e,f,h,d){var i={success:false,id:b};if(a.w3&&!(a.wk&&a.wk<312)&&n&&b&&j&&k&&o){l(b,false);E(function(){j+="";k+="";var a={};if(h&&typeof h===g)for(var t in h)a[t]=h[t];a.data=n;a.width=j;a.height=k;var p={};if(f&&typeof f===g)for(var s in f)p[s]=f[s];if(e&&typeof e===g)for(var r in e)if(typeof p.flashvars!=c)p.flashvars+="&"+r+"="+e[r];else p.flashvars=r+"="+e[r];if(q(o)){var u=B(a,p,b);a.id==b&&l(b,true);i.success=true;i.ref=u}else if(m&&v()){a.data=m;A(a,p,b,d);return}else l(b,true);d&&d(i)})}else d&&d(i)},switchOffAutoHideShow:function(){G=false},ua:a,getFlashPlayerVersion:function(){return{major:a.pv[0],minor:a.pv[1],release:a.pv[2]}},hasFlashPlayerVersion:q,createSWF:function(d,c,b){return a.w3?B(d,c,b):undefined},showExpressInstall:function(e,b,c,d){a.w3&&v()&&A(e,b,c,d)},removeSWF:function(b){a.w3&&N(b)},createCSS:function(b,e,d,c){a.w3&&L(b,e,d,c)},addDomLoadEvent:E,addLoadEvent:I,getQueryParamValue:function(e){var c=b.location.search||b.location.hash;if(c){if(/\?/.test(c))c=c.split("?")[1];if(e==null)return F(c);for(var d=c.split("&"),a=0;a<d.length;a++)if(d[a].substring(0,d[a].indexOf("="))==e)return F(d[a].substring(d[a].indexOf("=")+1))}return""},expressInstallCallback:function(){if(p){var b=e(H);if(b&&o){b.parentNode.replaceChild(o,b);if(s){l(s,true);if(a.ie&&a.win)o.style.display="block"}w&&w(D)}p=false}}}}();jQuery&&(function(a){a.extend(a.fn,{uploadify:function(b){a(this).each(function(){var c=a.extend({id:a(this).attr("id"),uploader:"uploadify.swf",script:"uploadify.php",expressInstall:null,folder:"",height:30,width:120,cancelImg:"cancel.png",wmode:"opaque",scriptAccess:"sameDomain",fileDataName:"Filedata",method:"POST",queueSizeLimit:999,simUploadLimit:1,queueID:false,displayData:"percentage",removeCompleted:true,onInit:function(){},onSelect:function(){},onSelectOnce:function(){},onQueueFull:function(){},onCheck:function(){},onCancel:function(){},onClearQueue:function(){},onError:function(){},onProgress:function(){},onComplete:function(){},onAllComplete:function(){}},b);a(this).data("settings",c);var e=location.pathname;e=e.split("/");e.pop();e=e.join("/")+"/";var d={};d.uploadifyID=c.id;d.pagepath=e;if(c.buttonImg)d.buttonImg=escape(c.buttonImg);if(c.buttonText)d.buttonText=escape(c.buttonText);if(c.rollover)d.rollover=true;d.script=c.script;d.folder=escape(c.folder);if(c.scriptData){var f="";for(var h in c.scriptData)f+="&"+h+"="+c.scriptData[h];d.scriptData=escape(f.substr(1))}d.width=c.width;d.height=c.height;d.wmode=c.wmode;d.method=c.method;d.queueSizeLimit=c.queueSizeLimit;d.simUploadLimit=c.simUploadLimit;if(c.hideButton)d.hideButton=true;if(c.fileDesc)d.fileDesc=c.fileDesc;if(c.fileExt)d.fileExt=c.fileExt;if(c.multi)d.multi=true;if(c.auto)d.auto=true;if(c.sizeLimit)d.sizeLimit=c.sizeLimit;if(c.checkScript)d.checkScript=c.checkScript;if(c.fileDataName)d.fileDataName=c.fileDataName;if(c.queueID)d.queueID=c.queueID;if(c.onInit()!==false){a(this).css("display","none");a(this).after('<div id="'+a(this).attr("id")+'Uploader"></div>');swfobject.embedSWF(c.uploader,c.id+"Uploader",c.width,c.height,"9.0.24",c.expressInstall,d,{quality:"high",wmode:c.wmode,allowScriptAccess:c.scriptAccess},{},function(a){typeof c.onSWFReady=="function"&&a.success&&c.onSWFReady()});if(c.queueID==false)a("#"+a(this).attr("id")+"Uploader").after('<div id="'+a(this).attr("id")+'Queue" class="uploadifyQueue"></div>');else a("#"+c.queueID).addClass("uploadifyQueue")}typeof c.onOpen=="function"&&a(this).bind("uploadifyOpen",c.onOpen);a(this).bind("uploadifySelect",{action:c.onSelect,queueID:c.queueID},function(f,g,d){if(f.data.action(f,g,d)!==false){var b=Math.round(d.size/1024*100)*.01,h="KB";if(b>1e3){b=Math.round(b*.001*100)*.01;h="MB"}var e=b.toString().split(".");if(e.length>1)b=e[0]+"."+e[1].substr(0,2);else b=e[0];if(d.name.length>20)fileName=d.name.substr(0,20)+"...";else fileName=d.name;queue="#"+a(this).attr("id")+"Queue";if(f.data.queueID)queue="#"+f.data.queueID;a(queue).append('<div id="'+a(this).attr("id")+g+'" class="uploadifyQueueItem">\t\t\t\t\t\t\t\t<div class="cancel">\t\t\t\t\t\t\t\t\t<a href="javascript:jQuery(\'#'+a(this).attr("id")+"').uploadifyCancel('"+g+'\')"><img src="'+c.cancelImg+'" border="0" /></a>\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t<span class="fileName">'+fileName+" ("+b+h+')</span><span class="percentage"></span>\t\t\t\t\t\t\t\t<div class="uploadifyProgress">\t\t\t\t\t\t\t\t\t<div id="'+a(this).attr("id")+g+'ProgressBar" class="uploadifyProgressBar"><!--Progress Bar--></div>\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t</div>')}});a(this).bind("uploadifySelectOnce",{action:c.onSelectOnce},function(b,d){b.data.action(b,d);if(c.auto)if(c.checkScript)a(this).uploadifyUpload(null,false);else a(this).uploadifyUpload(null,true)});a(this).bind("uploadifyQueueFull",{action:c.onQueueFull},function(b,a){b.data.action(b,a)!==false&&alert("The queue is full.  The max size is "+a+".")});a(this).bind("uploadifyCheckExist",{action:c.onCheck},function(b,i,f,d,g){var c={};c=f;c.folder=d.substr(0,1)=="/"?d:e+d;if(g)for(var j in f)var h=j;a.post(i,c,function(c){for(var d in c)if(b.data.action(b,c,d)!==false){var e=confirm("Do you want to replace the file "+c[d]+"?");!e&&document.getElementById(a(b.target).attr("id")+"Uploader").cancelFileUpload(d,true,true)}if(g)document.getElementById(a(b.target).attr("id")+"Uploader").startFileUpload(h,true);else document.getElementById(a(b.target).attr("id")+"Uploader").startFileUpload(null,true)},"json")});a(this).bind("uploadifyCancel",{action:c.onCancel},function(c,d,f,h,g,b){if(c.data.action(c,d,f,h,b)!==false)if(g){var e=b==true?0:250;a("#"+a(this).attr("id")+d).fadeOut(e,function(){a(this).remove()})}});a(this).bind("uploadifyClearQueue",{action:c.onClearQueue},function(e,b){var d=c.queueID?c.queueID:a(this).attr("id")+"Queue";b&&a("#"+d).find(".uploadifyQueueItem").remove();e.data.action(e,b)!==false&&a("#"+d).find(".uploadifyQueueItem").each(function(){var b=a(".uploadifyQueueItem").index(this);a(this).delay(b*100).fadeOut(250,function(){a(this).remove()})})});var g=[];a(this).bind("uploadifyError",{action:c.onError},function(e,b,d,c){if(e.data.action(e,b,d,c)!==false){var f=[b,d,c];g.push(f);a("#"+a(this).attr("id")+b).find(".percentage").text(" - "+c.type+" Error");a("#"+a(this).attr("id")+b).find(".uploadifyProgress").hide();a("#"+a(this).attr("id")+b).addClass("uploadifyError")}});typeof c.onUpload=="function"&&a(this).bind("uploadifyUpload",c.onUpload);a(this).bind("uploadifyProgress",{action:c.onProgress,toDisplay:c.displayData},function(b,d,e,c){if(b.data.action(b,d,e,c)!==false){a("#"+a(this).attr("id")+d+"ProgressBar").width(""+c.percentage.toString()+"%");c.percentage==100&&a(this).closest(".uploadifyProgress").fadeOut(250,function(){a(this).remove()});if(b.data.toDisplay=="percentage")displayData=" - "+c.percentage+"%";if(b.data.toDisplay=="speed")displayData=" - "+c.speed+"KB/s";if(b.data.toDisplay==null)displayData=" ";a("#"+a(this).attr("id")+d).find(".percentage").text(displayData)}});a(this).bind("uploadifyComplete",{action:c.onComplete},function(b,d,f,e,g){if(b.data.action(b,d,f,unescape(e),g)!==false){a("#"+a(this).attr("id")+d).find(".percentage").text(" - Completed");c.removeCompleted&&a("#"+a(b.target).attr("id")+d).fadeOut(250,function(){a(this).remove()});a("#"+a(b.target).attr("id")+d).addClass("completed")}});typeof c.onAllComplete=="function"&&a(this).bind("uploadifyAllComplete",{action:c.onAllComplete},function(a,b){if(a.data.action(a,b)!==false)g=[]})})},uploadifySettings:function(d,b,i){var c=false;a(this).each(function(){if(d=="scriptData"&&b!=null){if(i)var f=b;else var f=a.extend(a(this).data("settings").scriptData,b);var e="";for(var g in f)e+="&"+g+"="+f[g];b=escape(e.substr(1))}c=document.getElementById(a(this).attr("id")+"Uploader").updateSettings(d,b)});if(b==null)if(d=="scriptData"){for(var f=unescape(c).split("&"),g={},e=0;e<f.length;e++){var h=f[e].split("=");g[h[0]]=h[1]}c=g}return c},uploadifyUpload:function(c,b){a(this).each(function(){if(!b)b=false;document.getElementById(a(this).attr("id")+"Uploader").startFileUpload(c,b)})},uploadifyCancel:function(b){a(this).each(function(){document.getElementById(a(this).attr("id")+"Uploader").cancelFileUpload(b,true,true,false)})},uploadifyClearQueue:function(){a(this).each(function(){document.getElementById(a(this).attr("id")+"Uploader").clearFileUploadQueue(false)})}})})(jQuery);(function(a){a.Jcrop=function(z,R){var b=a.extend({},a.Jcrop.defaults),t,tb,P=false;function h(a){return a+"px"}function B(a){return b.baseClass+"-"+a}function hb(){return a.fx.step.hasOwnProperty("backgroundColor")}function J(c){var b=a(c).offset();return[b.left,b.top]}function C(a){return[a.pageX-t[0],a.pageY-t[1]]}function ab(c){if(typeof c!=="object")c={};b=a.extend(b,c);a.each(["onChange","onSelect","onRelease","onDblClick"],function(c,a){if(typeof b[a]!=="function")b[a]=function(){}})}function U(a,d){t=J(e);m.setCursor(a==="move"?a:a+"-resize");if(a==="move")return m.activateHandlers(kb(d),M);var f=g.getFixed(),b=T(a),c=g.getCorner(T(b));g.setPressed(g.getCorner(b));g.setCurrent(c);m.activateHandlers(ib(a,f),M)}function ib(d,a){return function(e){if(!b.aspectRatio)switch(d){case"e":e[1]=a.y2;break;case"w":e[1]=a.y2;break;case"n":e[0]=a.x2;break;case"s":e[0]=a.x2}else switch(d){case"e":e[1]=a.y+1;break;case"w":e[1]=a.y+1;break;case"n":e[0]=a.x+1;break;case"s":e[0]=a.x+1}g.setCurrent(e);c.update()}}function kb(b){var a=b;N.watchKeys();return function(b){g.moveOffset([b[0]-a[0],b[1]-a[1]]);a=b;c.update()}}function T(a){switch(a){case"n":return"sw";case"s":return"nw";case"e":return"nw";case"w":return"ne";case"ne":return"sw";case"nw":return"se";case"se":return"nw";case"sw":return"ne"}}function S(a){return function(c){if(b.disabled)return false;if(a==="move"&&!b.allowMove)return false;t=J(e);u=true;U(a,C(c));c.stopPropagation();c.preventDefault();return false}}function gb(a,e,d){var c=a.width(),b=a.height();if(c>e&&e>0){c=e;b=e/a.width()*a.height()}if(b>d&&d>0){b=d;c=d/a.height()*a.width()}j=a.width()/c;k=a.height()/b;a.width(c).height(b)}function D(a){return{x:a.x*j,y:a.y*k,x2:a.x2*j,y2:a.y2*k,w:a.w*j,h:a.h*k}}function M(){var a=g.getFixed();if(a.w>b.minSelect[0]&&a.h>b.minSelect[1]){c.enableHandles();c.done()}else c.release();m.setCursor(b.allowSelect?"crosshair":"default")}function V(a){if(b.disabled)return false;if(!b.allowSelect)return false;u=true;t=J(e);c.disableHandles();m.setCursor("crosshair");var d=C(a);g.setPressed(d);c.update();m.activateHandlers(mb,M);N.watchKeys();a.stopPropagation();a.preventDefault();return false}function mb(a){g.setCurrent(a);c.update()}function Z(){var b=a("<div></div>").addClass(B("tracker"));a.browser.msie&&b.css({opacity:0,backgroundColor:"white"});return b}if(a.browser.msie&&a.browser.version.split(".")[0]==="6")P=true;if(typeof z!=="object")z=a(z)[0];if(typeof R!=="object")R={};ab(R);var Q={border:"none",visibility:"visible",margin:0,padding:0,position:"absolute",top:0,left:0},i=a(z),eb=true;if(z.tagName=="IMG"){if(i[0].width!=0&&i[0].height!=0){i.width(i[0].width);i.height(i[0].height)}else{var O=new Image;O.src=i[0].src;i.width(O.width);i.height(O.height)}var e=i.clone().removeAttr("id").css(Q).show();e.width(i.width());e.height(i.height());i.after(e).hide()}else{e=i.css(Q).show();eb=false;if(b.shade===null)b.shade=true}gb(e,b.boxWidth,b.boxHeight);var f=e.width(),d=e.height(),n=a("<div />").width(f).height(d).addClass(B("holder")).css({position:"relative",backgroundColor:b.bgColor}).insertAfter(i).append(e);b.addClass&&n.addClass(b.addClass);var o=a("<div />"),I=a("<div />").width("100%").height("100%").css({zIndex:310,position:"absolute",overflow:"hidden"}),s=a("<div />").width("100%").height("100%").css("zIndex",320),w=a("<div />").css({position:"absolute",zIndex:600}).dblclick(function(){var a=g.getFixed();b.onDblClick.call(l,a)}).insertBefore(e).append(I,s);if(eb)o=a("<img />").attr("src",e.attr("src")).css(Q).width(f).height(d),I.append(o);P&&w.css({overflowY:"hidden"});var v=b.boundary,r=Z().width(f+v*2).height(d+v*2).css({position:"absolute",top:h(-v),left:h(-v),zIndex:290}).mousedown(V),fb=b.bgColor,A=b.bgOpacity,E,F,G,H,j,k,ub=true,u,cb,bb;t=J(e);var q=function(){function a(){var c={},e=["touchstart","touchmove","touchend"],f=document.createElement("div"),b;try{for(b=0;b<e.length;b++){var a=e[b];a="on"+a;var d=a in f;if(!d){f.setAttribute(a,"return;");d=typeof f[a]=="function"}c[e[b]]=d}return c.touchstart&&c.touchend&&c.touchmove}catch(g){return false}}function c(){return b.touchSupport===true||b.touchSupport===false?b.touchSupport:a()}return{createDragger:function(a){return function(c){c.pageX=c.originalEvent.changedTouches[0].pageX;c.pageY=c.originalEvent.changedTouches[0].pageY;if(b.disabled)return false;if(a==="move"&&!b.allowMove)return false;u=true;U(a,C(c));c.stopPropagation();c.preventDefault();return false}},newSelection:function(a){a.pageX=a.originalEvent.changedTouches[0].pageX;a.pageY=a.originalEvent.changedTouches[0].pageY;return V(a)},isSupported:a,support:c()}}(),g=function(){var a=0,c=0,g=0,e=0,n,o;function r(b){b=m(b);g=a=b[0];e=c=b[1]}function q(a){a=m(a);n=a[0]-g;o=a[1]-e;g=a[0];e=a[1]}function t(){return[n,o]}function p(i){var b=i[0],h=i[1];if(0>a+b)b-=b+a;if(0>c+h)h-=h+c;if(d<e+h)h+=d-(e+h);if(f<g+b)b+=f-(g+b);a+=b;g+=b;c+=h;e+=h}function s(b){var a=i();switch(b){case"ne":return[a.x2,a.y];case"nw":return[a.x,a.y];case"se":return[a.x2,a.y2];case"sw":return[a.x,a.y2]}}function i(){if(!b.aspectRatio)return u();var n=b.aspectRatio,r=b.minSize[0]/j,q=b.maxSize[0]/j,v=b.maxSize[1]/k,t=g-a,s=e-c,x=Math.abs(t),w=Math.abs(s),y=x/w,i,m,p,o;if(q===0)q=f*10;if(v===0)v=d*10;if(y<n){m=e;p=w*n;i=t<0?a-p:p+a;if(i<0){i=0;o=Math.abs((i-a)/n);m=s<0?c-o:o+c}else if(i>f){i=f;o=Math.abs((i-a)/n);m=s<0?c-o:o+c}}else{i=g;o=x/n;m=s<0?c-o:c+o;if(m<0){m=0;p=Math.abs((m-c)*n);i=t<0?a-p:p+a}else if(m>d){m=d;p=Math.abs(m-c)*n;i=t<0?a-p:p+a}}if(i>a){if(i-a<r)i=a+r;else if(i-a>q)i=a+q;if(m>c)m=c+(i-a)/n;else m=c-(i-a)/n}else if(i<a){if(a-i<r)i=a-r;else if(a-i>q)i=a-q;if(m>c)m=c+(a-i)/n;else m=c-(a-i)/n}if(i<0){a-=i;i=0}else if(i>f){a-=i-f;i=f}if(m<0){c-=m;m=0}else if(m>d){c-=m-d;m=d}return l(h(a,c,i,m))}function m(a){if(a[0]<0)a[0]=0;if(a[1]<0)a[1]=0;if(a[0]>f)a[0]=f;if(a[1]>d)a[1]=d;return[a[0],a[1]]}function h(a,c,b,d){var e=a,f=b,g=c,h=d;if(b<a){e=b;f=a}if(d<c){g=d;h=c}return[e,g,f,h]}function u(){var i=g-a,m=e-c,b;if(E&&Math.abs(i)>E)g=i>0?a+E:a-E;if(F&&Math.abs(m)>F)e=m>0?c+F:c-F;if(H/k&&Math.abs(m)<H/k)e=m>0?c+H/k:c-H/k;if(G/j&&Math.abs(i)<G/j)g=i>0?a+G/j:a-G/j;if(a<0){g-=a;a-=a}if(c<0){e-=c;c-=c}if(g<0){a-=g;g-=g}if(e<0){c-=e;e-=e}if(g>f){b=g-f;a-=b;g-=b}if(e>d){b=e-d;c-=b;e-=b}if(a>f){b=a-d;e-=b;c-=b}if(c>d){b=c-d;e-=b;c-=b}return l(h(a,c,g,e))}function l(a){return{x:a[0],y:a[1],x2:a[2],y2:a[3],w:a[2]-a[0],h:a[3]-a[1]}}return{flipCoords:h,setPressed:r,setCurrent:q,getOffset:t,moveOffset:p,getCorner:s,getFixed:i}}(),p=function(){var k=false,i=a("<div />").css({position:"absolute",zIndex:240,opacity:0}),j={top:l(),left:l().height(d),right:l().height(d),bottom:l()};function v(b,a){j.left.css({height:h(a)});j.right.css({height:h(a)})}function t(){return r(g.getFixed())}function r(a){j.top.css({left:h(a.x),width:h(a.w),height:h(a.y)});j.bottom.css({top:h(a.y2),left:h(a.x),width:h(a.w),height:h(d-a.y2)});j.right.css({left:h(a.x2),width:h(f-a.x2)});j.left.css({width:h(a.x)})}function l(){return a("<div />").css({position:"absolute",backgroundColor:b.shadeColor||b.bgColor}).appendTo(i)}function q(){if(!k){k=true;i.insertBefore(e);t();c.setBgOpacity(1,0,1);o.hide();s(b.shadeColor||b.bgColor,1);if(c.isAwake())m(b.bgOpacity,1);else m(1,1)}}function s(a,b){K(u(),a,b)}function p(){if(k){i.remove();o.show();k=false;if(c.isAwake())c.setBgOpacity(b.bgOpacity,1,1);else{c.setBgOpacity(1,1,1);c.disableHandles()}K(n,0,1)}}function m(a,c){if(k)if(b.bgFade&&!c)i.animate({opacity:1-a},{queue:false,duration:b.fadeTime});else i.css({opacity:1-a})}function w(){b.shade?q():p();c.isAwake()&&m(b.bgOpacity)}function u(){return i.children()}return{update:t,updateRaw:r,getShades:u,setBgColor:s,enable:q,disable:p,resize:v,refresh:w,opacity:m}}(),c=function(){var c,v=370,H={},L={},J={},f=false;function E(d){var c=a("<div />").css({position:"absolute",opacity:b.borderOpacity}).addClass(B(d));I.append(c);return c}function r(b,d){var c=a("<div />").mousedown(S(b)).css({cursor:b+"-resize",position:"absolute",zIndex:d}).addClass("ord-"+b);q.support&&c.bind("touchstart.jcrop",q.createDragger(b));s.append(c);return c}function F(c){var a=b.handleSize;return r(c,v++).css({opacity:b.handleOpacity}).width(a).height(a).addClass(B("handle"))}function C(a){return r(a,v++).addClass("jcrop-dragbar")}function x(b){for(var a=0;a<b.length;a++)J[b[a]]=C(b[a])}function y(c){for(var a,b=0;b<c.length;b++){switch(c[b]){case"n":a="hline";break;case"s":a="hline bottom";break;case"e":a="vline right";break;case"w":a="vline"}H[c[b]]=E(a)}}function z(b){for(var a=0;a<b.length;a++)L[b[a]]=F(b[a])}function M(a,c){!b.shade&&o.css({top:h(-c),left:h(-a)});w.css({top:h(c),left:h(a)})}function N(b,a){w.width(b).height(a)}function t(){var a=g.getFixed();g.setPressed([a.x,a.y]);g.setCurrent([a.x2,a.y2]);m()}function m(a){if(c)return u(a)}function u(d){var a=g.getFixed();N(a.w,a.h);M(a.x,a.y);b.shade&&p.updateRaw(a);c||P();if(d)b.onSelect.call(l,D(a));else b.onChange.call(l,D(a))}function i(a,d,f){if(!c&&!d)return;if(b.bgFade&&!f)e.animate({opacity:a},{queue:false,duration:b.fadeTime});else e.css("opacity",a)}function P(){w.show();if(b.shade)p.opacity(A);else i(A,true);c=true}function K(){d();w.hide();if(b.shade)p.opacity(1);else i(1);c=false;b.onRelease.call(l)}function G(){f&&s.show()}function k(){f=true;if(b.allowResize){s.show();return true}}function d(){f=false;s.hide()}function n(a){if(cb===a)d();else k()}function O(){n(false);t()}b.dragEdges&&a.isArray(b.createDragbars)&&x(b.createDragbars);a.isArray(b.createHandles)&&z(b.createHandles);b.drawBorders&&a.isArray(b.createBorders)&&y(b.createBorders);a(document).bind("touchstart.jcrop-ios",function(b){a(b.currentTarget).hasClass("jcrop-tracker")&&b.stopPropagation()});var j=Z().mousedown(S("move")).css({cursor:"move",position:"absolute",zIndex:360});q.support&&j.bind("touchstart.jcrop",q.createDragger("move"));I.append(j);d();return{updateVisible:m,update:u,release:K,refresh:t,isAwake:function(){return c},setCursor:function(a){j.css("cursor",a)},enableHandles:k,enableOnly:function(){f=true},showHandles:G,disableHandles:d,animMode:n,setBgOpacity:i,done:O}}(),m=function(){var i=function(){},h=function(){},j=b.trackDocument;function p(){r.css({zIndex:450});q.support&&a(document).bind("touchmove.jcrop",m).bind("touchend.jcrop",n);j&&a(document).bind("mousemove.jcrop",f).bind("mouseup.jcrop",d)}function s(){r.css({zIndex:290});a(document).unbind(".jcrop")}function f(a){i(C(a));return false}function d(a){a.preventDefault();a.stopPropagation();if(u){u=false;h(C(a));c.isAwake()&&b.onSelect.call(l,D(g.getFixed()));s();i=function(){};h=function(){}}return false}function k(b,a){u=true;i=b;h=a;p();return false}function m(a){a.pageX=a.originalEvent.changedTouches[0].pageX;a.pageY=a.originalEvent.changedTouches[0].pageY;return f(a)}function n(a){a.pageX=a.originalEvent.changedTouches[0].pageX;a.pageY=a.originalEvent.changedTouches[0].pageY;return d(a)}function o(a){r.css("cursor",a)}!j&&r.mousemove(f).mouseup(d).mouseout(d);e.before(r);return{activateHandlers:k,setCursor:o}}(),N=function(){var d=a('<input type="radio" />').css({position:"fixed",left:"-99999px",width:"12px"}),i=a("<div />").css({position:"absolute",overflow:"hidden"}).append(d);function h(){if(b.keySupport){d.show();d.focus()}}function k(){d.hide()}function f(a,d,e){if(b.allowMove){g.moveOffset([d,e]);c.updateVisible(true)}a.preventDefault();a.stopPropagation()}function j(a){if(a.ctrlKey||a.metaKey)return true;bb=a.shiftKey?true:false;var d=bb?10:1;switch(a.keyCode){case 37:f(a,-d,0);break;case 39:f(a,d,0);break;case 38:f(a,0,-d);break;case 40:f(a,0,d);break;case 27:b.allowSelect&&c.release();break;case 9:return true}return false}if(b.keySupport){d.keydown(j).blur(k);if(P||!b.fixedSupport){d.css({position:"absolute",left:"-20px"});i.append(d).insertBefore(e)}else d.insertBefore(e)}return{watchKeys:h}}();function qb(a){n.removeClass().addClass(B("holder")).addClass(a)}function pb(h,p){var z=h[0]/j,A=h[1]/k,m=h[2]/j,n=h[3]/k;if(cb)return;var f=g.flipCoords(z,A,m,n),i=g.getFixed(),e=[i.x,i.y,i.x2,i.y2],a=e,s=b.animationDelay,t=f[0]-e[0],v=f[1]-e[1],u=f[2]-e[2],w=f[3]-e[3],d=0,r=b.swingSpeed;x=a[0];y=a[1];m=a[2];n=a[3];c.animMode(true);var B;function o(){window.setTimeout(q,s)}var q=function(){return function(){d+=(100-d)/r;a[0]=x+d/100*t;a[1]=y+d/100*v;a[2]=m+d/100*u;a[3]=n+d/100*w;if(d>=99.8)d=100;if(d<100){W(a);o()}else{c.done();typeof p==="function"&&p.call(l)}}}();o()}function db(a){W([a[0]/j,a[1]/k,a[2]/j,a[3]/k]);b.onSelect.call(l,D(g.getFixed()));c.enableHandles()}function W(a){g.setPressed([a[0],a[1]]);g.setCurrent([a[2],a[3]]);c.update()}function ob(){return D(g.getFixed())}function nb(){return g.getFixed()}function jb(a){ab(a);L()}function X(){b.disabled=true;c.disableHandles();c.setCursor("default");m.setCursor("default")}function Y(){b.disabled=false;L()}function lb(){c.done();m.activateHandlers(null,null)}function sb(){n.remove();i.show();a(z).removeData("Jcrop")}function rb(g,h){c.release();X();var a=new Image;a.onload=function(){var k=a.width,j=a.height,i=b.boxWidth,c=b.boxHeight;e.width(k).height(j);e.attr("src",g);o.attr("src",g);gb(e,i,c);f=e.width();d=e.height();o.width(f).height(d);r.width(f+v*2).height(d+v*2);n.width(f).height(d);p.resize(f,d);Y();typeof h==="function"&&h.call(l)};a.src=g}function K(c,d,e){var a=d||b.bgColor;if(b.bgFade&&hb()&&b.fadeTime&&!e)c.animate({backgroundColor:a},{queue:false,duration:b.fadeTime});else c.css("backgroundColor",a)}function L(a){if(b.allowResize)if(a)c.enableOnly();else c.enableHandles();else c.disableHandles();m.setCursor(b.allowSelect?"crosshair":"default");c.setCursor(b.allowMove?"move":"default");if(b.hasOwnProperty("trueSize")){j=b.trueSize[0]/f;k=b.trueSize[1]/d}if(b.hasOwnProperty("setSelect")){db(b.setSelect);c.done();delete b.setSelect}p.refresh();if(b.bgColor!=fb){K(b.shade?p.getShades():n,b.shade?b.shadeColor||b.bgColor:b.bgColor);fb=b.bgColor}if(A!=b.bgOpacity){A=b.bgOpacity;if(b.shade)p.refresh();else c.setBgOpacity(A)}E=b.maxSize[0]||0;F=b.maxSize[1]||0;G=b.minSize[0]||0;H=b.minSize[1]||0;if(b.hasOwnProperty("outerImage")){e.attr("src",b.outerImage);delete b.outerImage}c.refresh()}q.support&&r.bind("touchstart.jcrop",q.newSelection);s.hide();L(true);var l={setImage:rb,animateTo:pb,setSelect:db,setOptions:jb,tellSelect:ob,tellScaled:nb,setClass:qb,disable:X,enable:Y,cancel:lb,release:c.release,destroy:sb,focus:N.watchKeys,getBounds:function(){return[f*j,d*k]},getWidgetSize:function(){return[f,d]},getScaleFactor:function(){return[j,k]},getOptions:function(){return b},ui:{holder:n,selection:w}};a.browser.msie&&n.bind("selectstart",function(){return false});i.data("Jcrop",l);return l};a.fn.Jcrop=function(c,b){var d;this.each(function(){if(a(this).data("Jcrop"))if(c==="api")return a(this).data("Jcrop");else a(this).data("Jcrop").setOptions(c);else if(this.tagName=="IMG")a.Jcrop.Loader(this,function(){a(this).css({display:"block",visibility:"hidden"});d=a.Jcrop(this,c);a.isFunction(b)&&b.call(d)});else{a(this).css({display:"block",visibility:"hidden"});d=a.Jcrop(this,c);a.isFunction(b)&&b.call(d)}});return this};a.Jcrop.Loader=function(g,d,f){var b=a(g),c=b[0];function e(){if(c.complete){b.unbind(".jcloader");a.isFunction(d)&&d.call(c)}else window.setTimeout(e,50)}b.bind("load.jcloader",e).bind("error.jcloader",function(){b.unbind(".jcloader");a.isFunction(f)&&f.call(c)});if(c.complete&&a.isFunction(d)){b.unbind(".jcloader");d.call(c)}};a.Jcrop.defaults={allowSelect:true,allowMove:true,allowResize:true,trackDocument:true,baseClass:"jcrop",addClass:null,bgColor:"black",bgOpacity:.6,bgFade:false,borderOpacity:.4,handleOpacity:.5,handleSize:7,aspectRatio:0,keySupport:true,createHandles:["n","s","e","w","nw","ne","se","sw"],createDragbars:["n","s","e","w"],createBorders:["n","s","e","w"],drawBorders:true,dragEdges:true,fixedSupport:true,touchSupport:null,shade:null,boxWidth:0,boxHeight:0,boundary:2,fadeTime:400,animationDelay:20,swingSpeed:3,minSelect:[0,0],maxSize:[0,0],minSize:[0,0],onChange:function(){},onSelect:function(){},onDblClick:function(){},onRelease:function(){}}})(jQuery);window.JSON||(window.JSON={}),function(){function c(a){return a<10?"0"+a:a}function h(a){return g.lastIndex=0,g.test(a)?'"'+a.replace(g,function(a){var b=j[a];return typeof b=="string"?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function f(m,n){var i,j,e,k,l=a,g,c=n[m];c&&typeof c=="object"&&typeof c.toJSON=="function"&&(c=c.toJSON(m)),typeof b=="function"&&(c=b.call(n,m,c));switch(typeof c){case"string":return h(c);case"number":return isFinite(c)?String(c):"null";case"boolean":case"null":return String(c);case"object":if(!c)return"null";a+=d,g=[];if(Object.prototype.toString.apply(c)==="[object Array]"){k=c.length;for(i=0;i<k;i+=1)g[i]=f(i,c)||"null";return e=g.length===0?"[]":a?"[\n"+a+g.join(",\n"+a)+"\n"+l+"]":"["+g.join(",")+"]",a=l,e}if(b&&typeof b=="object"){k=b.length;for(i=0;i<k;i+=1)j=b[i],typeof j=="string"&&(e=f(j,c),e&&g.push(h(j)+(a?": ":":")+e))}else for(j in c)Object.hasOwnProperty.call(c,j)&&(e=f(j,c),e&&g.push(h(j)+(a?": ":":")+e));return e=g.length===0?"{}":a?"{\n"+a+g.join(",\n"+a)+"\n"+l+"}":"{"+g.join(",")+"}",a=l,e}}typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+c(this.getUTCMonth()+1)+"-"+c(this.getUTCDate())+"T"+c(this.getUTCHours())+":"+c(this.getUTCMinutes())+":"+c(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var e=window.JSON,i=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,g=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,a,d,j={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},b;typeof e.stringify!="function"&&(e.stringify=function(h,c,e){var g;a="",d="";if(typeof e=="number")for(g=0;g<e;g+=1)d+=" ";else typeof e=="string"&&(d=e);b=c;if(!c||typeof c=="function"||typeof c=="object"&&typeof c.length=="number")return f("",{"":h});throw new Error("JSON.stringify");}),typeof e.parse!="function"&&(e.parse=function(a,c){function d(f,g){var b,e,a=f[g];if(a&&typeof a=="object")for(b in a)Object.hasOwnProperty.call(a,b)&&(e=d(a,b),e!==undefined?a[b]=e:delete a[b]);return c.call(f,g,a)}var b;a=String(a),i.lastIndex=0,i.test(a)&&(a=a.replace(i,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return b=eval("("+a+")"),typeof c=="function"?d({"":b},""):b;throw new SyntaxError("JSON.parse");})}(),function(b,d){var a=b.History=b.History||{},c=b.jQuery;if(typeof a.Adapter!="undefined")throw new Error("History.js Adapter has already been loaded...");a.Adapter={bind:function(a,b,d){c(a).bind(b,d)},trigger:function(a,b,d){c(a).trigger(b,d)},extractEventData:function(b,a,c){return a&&a.originalEvent&&a.originalEvent[b]||c&&c[b]||d},onDomLoad:function(a){c(a)}},typeof a.init!="undefined"&&a.init()}(window),function(b){var c=b.document,e=b.setTimeout||e,f=b.clearTimeout||f,d=b.setInterval||d,a=b.History=b.History||{};if(typeof a.initHtml4!="undefined")throw new Error("History.js HTML4 Support has already been loaded...");a.initHtml4=function(){if(typeof a.initHtml4.initialized!="undefined")return false;a.initHtml4.initialized=true,a.enabled=true,a.savedHashes=[],a.isLastHash=function(c){var d=a.getHashByIndex(),b;return b=c===d,b},a.saveHash=function(b){return a.isLastHash(b)?false:(a.savedHashes.push(b),true)},a.getHashByIndex=function(b){var c=null;return typeof b=="undefined"?c=a.savedHashes[a.savedHashes.length-1]:b<0?c=a.savedHashes[a.savedHashes.length+b]:c=a.savedHashes[b],c},a.discardedHashes={},a.discardedStates={},a.discardState=function(b,d,e){var f=a.getHashByState(b),c;return c={discardedState:b,backState:e,forwardState:d},a.discardedStates[f]=c,true},a.discardHash=function(b,c,d){var e={discardedHash:b,backState:d,forwardState:c};return a.discardedHashes[b]=e,true},a.discardedState=function(c){var d=a.getHashByState(c),b;return b=a.discardedStates[d]||false,b},a.discardedHash=function(b){return a.discardedHashes[b]||false},a.recycleState=function(b){var c=a.getHashByState(b);return a.discardedState(b)&&delete a.discardedStates[c],true},a.emulated.hashChange&&(a.hashChangeInit=function(){a.checkerFunction=null;var f="",i,e,g,h;return a.isInternetExplorer()?(i="historyjs-iframe",e=c.createElement("iframe"),e.setAttribute("id",i),e.style.display="none",c.body.appendChild(e),e.contentWindow.document.open(),e.contentWindow.document.close(),g="",h=false,a.checkerFunction=function(){if(h)return false;h=true;var c=a.getHash()||"",d=a.unescapeHash(e.contentWindow.document.location.hash)||"";return c!==f?(f=c,d!==c&&(g=d=c,e.contentWindow.document.open(),e.contentWindow.document.close(),e.contentWindow.document.location.hash=a.escapeHash(c)),a.Adapter.trigger(b,"hashchange")):d!==g&&(g=d,a.setHash(d,false)),h=false,true}):a.checkerFunction=function(){var c=a.getHash();return c!==f&&(f=c,a.Adapter.trigger(b,"hashchange")),true},a.intervalList.push(d(a.checkerFunction,a.options.hashChangeInterval)),true},a.Adapter.onDomLoad(a.hashChangeInit)),a.emulated.pushState&&(a.onHashChange=function(g){var h=g&&g.newURL||c.location.href,e=a.getHashByUrl(h),d=null,i=null,j=null,f;return a.isLastHash(e)?(a.busy(false),false):(a.doubleCheckComplete(),a.saveHash(e),e&&a.isTraditionalAnchor(e)?(a.Adapter.trigger(b,"anchorchange"),a.busy(false),false):(d=a.extractState(a.getFullUrl(e||c.location.href,false),true),a.isLastSavedState(d)?(a.busy(false),false):(i=a.getHashByState(d),f=a.discardedState(d),f?(a.getHashByIndex(-2)===a.getHashByState(f.forwardState)?a.back(false):a.forward(false),false):(a.pushState(d.data,d.title,d.url,false),true))))},a.Adapter.bind(b,"hashchange",a.onHashChange),a.pushState=function(h,i,f,g){if(a.getHashByUrl(f))throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(g!==false&&a.busy())return a.pushQueue({scope:a,callback:a.pushState,args:arguments,queue:g}),false;a.busy(true);var d=a.createStateObject(h,i,f),e=a.getHashByState(d),j=a.getState(false),k=a.getHashByState(j),l=a.getHash();return a.storeState(d),a.expectedStateId=d.id,a.recycleState(d),a.setTitle(d),e===k?(a.busy(false),false):e!==l&&e!==a.getShortUrl(c.location.href)?(a.setHash(e,false),false):(a.saveState(d),a.Adapter.trigger(b,"statechange"),a.busy(false),true)},a.replaceState=function(e,f,c,d){if(a.getHashByUrl(c))throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(d!==false&&a.busy())return a.pushQueue({scope:a,callback:a.replaceState,args:arguments,queue:d}),false;a.busy(true);var b=a.createStateObject(e,f,c),g=a.getState(false),h=a.getStateByIndex(-2);return a.discardState(g,b,h),a.pushState(b.data,b.title,b.url,false),true}),a.emulated.pushState&&a.getHash()&&!a.emulated.hashChange&&a.Adapter.onDomLoad(function(){a.Adapter.trigger(b,"hashchange")})},typeof a.init!="undefined"&&a.init()}(window),function(b,g){var e=b.console||g,c=b.document,f=b.navigator,h=b.sessionStorage||false,j=b.setTimeout,k=b.clearTimeout,l=b.setInterval,m=b.clearInterval,d=b.JSON,n=b.alert,a=b.History=b.History||{},i=b.history;d.stringify=d.stringify||d.encode,d.parse=d.parse||d.decode;if(typeof a.init!="undefined")throw new Error("History.js Core has already been loaded...");a.init=function(){return typeof a.Adapter=="undefined"?false:(typeof a.initCore!="undefined"&&a.initCore(),typeof a.initHtml4!="undefined"&&a.initHtml4(),true)},a.initCore=function(){if(typeof a.initCore.initialized!="undefined")return false;a.initCore.initialized=true,a.options=a.options||{},a.options.hashChangeInterval=a.options.hashChangeInterval||100,a.options.safariPollInterval=a.options.safariPollInterval||500,a.options.doubleCheckInterval=a.options.doubleCheckInterval||500,a.options.storeInterval=a.options.storeInterval||1e3,a.options.busyDelay=a.options.busyDelay||250,a.options.debug=a.options.debug||false,a.options.initialTitle=a.options.initialTitle||c.title,a.options.disableSuid=a.options.disableSuid||false,a.intervalList=[],a.clearAllIntervals=function(){var b,c=a.intervalList;if(typeof c!="undefined"&&c!==null){for(b=0;b<c.length;b++)m(c[b]);a.intervalList=null}},a.debug=function(){(a.options.debug||false)&&a.log.apply(a,arguments)},a.log=function(){var i=typeof e!="undefined"&&typeof e.log!="undefined"&&typeof e.log.apply!="undefined",b=c.getElementById("log"),a,g,j,h,f;i?(h=Array.prototype.slice.call(arguments),a=h.shift(),typeof e.debug!="undefined"?e.debug.apply(e,[a,h]):e.log.apply(e,[a,h])):a="\n"+arguments[0]+"\n";for(g=1,j=arguments.length;g<j;++g){f=arguments[g];if(typeof f=="object"&&typeof d!="undefined")try{f=d.stringify(f)}catch(k){}a+="\n"+f+"\n"}return b?(b.value+=a+"\n-----\n",b.scrollTop=b.scrollHeight-b.clientHeight):i||n(a),true},a.getInternetExplorerMajorVersion=function(){return a.getInternetExplorerMajorVersion.cached=typeof a.getInternetExplorerMajorVersion.cached!="undefined"?a.getInternetExplorerMajorVersion.cached:function(){var a=3,b=c.createElement("div"),d=b.getElementsByTagName("i");while((b.innerHTML="<!--[if gt IE "+ ++a+"]><i></i><![endif]-->")&&d[0]);return a>4?a:false}()},a.isInternetExplorer=function(){return a.isInternetExplorer.cached=typeof a.isInternetExplorer.cached!="undefined"?a.isInternetExplorer.cached:Boolean(a.getInternetExplorerMajorVersion())},a.emulated={pushState:!Boolean(b.history&&b.history.pushState&&b.history.replaceState&&!/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(f.userAgent)&&!/AppleWebKit\/5([0-2]|3[0-2])/i.test(f.userAgent)),hashChange:Boolean(!("onhashchange"in b||"onhashchange"in c)||a.isInternetExplorer()&&a.getInternetExplorerMajorVersion()<8)},a.enabled=!a.emulated.pushState,a.bugs={setHash:Boolean(!a.emulated.pushState&&f.vendor==="Apple Computer, Inc."&&/AppleWebKit\/5([0-2]|3[0-3])/.test(f.userAgent)),safariPoll:Boolean(!a.emulated.pushState&&f.vendor==="Apple Computer, Inc."&&/AppleWebKit\/5([0-2]|3[0-3])/.test(f.userAgent)),ieDoubleCheck:Boolean(a.isInternetExplorer()&&a.getInternetExplorerMajorVersion()<8),hashEscape:Boolean(a.isInternetExplorer()&&a.getInternetExplorerMajorVersion()<7)},a.isEmptyObject=function(a){for(var b in a)return false;return true},a.cloneObject=function(b){var c,a;return b?(c=d.stringify(b),a=d.parse(c)):a={},a},a.getRootUrl=function(){var a=c.location.protocol+"//"+(c.location.hostname||c.location.host);if(c.location.port||false)a+=":"+c.location.port;return a+="/",a},a.getBaseHref=function(){var b=c.getElementsByTagName("base"),d=null,a="";return b.length===1&&(d=b[0],a=d.href.replace(/[^\/]+$/,"")),a=a.replace(/\/+$/,""),a&&(a+="/"),a},a.getBaseUrl=function(){return a.getBaseHref()||a.getBasePageUrl()||a.getRootUrl()},a.getPageUrl=function(){var d=a.getState(false,false),e=(d||{}).url||c.location.href,b;return b=e.replace(/\/+$/,"").replace(/[^\/]+$/,function(a){return/\./.test(a)?a:a+"/"}),b},a.getBasePageUrl=function(){return c.location.href.replace(/[#\?].*/,"").replace(/[^\/]+$/,function(a){return/[^\/]$/.test(a)?"":a}).replace(/\/+$/,"")+"/"},a.getFullUrl=function(b,d){var c=b,e=b.substring(0,1);return d=typeof d=="undefined"?true:d,/[a-z]+\:\/\//.test(b)||(e==="/"?c=a.getRootUrl()+b.replace(/^\/+/,""):e==="#"?c=a.getPageUrl().replace(/#.*/,"")+b:e==="?"?c=a.getPageUrl().replace(/[\?#].*/,"")+b:d?c=a.getBaseUrl()+b.replace(/^(\.\/)+/,""):c=a.getBasePageUrl()+b.replace(/^(\.\/)+/,"")),c.replace(/\#$/,"")},a.getShortUrl=function(c){var b=c,d=a.getBaseUrl(),e=a.getRootUrl();return a.emulated.pushState&&(b=b.replace(d,"")),b=b.replace(e,"/"),a.isTraditionalAnchor(b)&&(b="./"+b),b=b.replace(/^(\.\/)+/g,"./").replace(/\#$/,""),b},a.store={},a.idToState=a.idToState||{},a.stateToId=a.stateToId||{},a.urlToId=a.urlToId||{},a.storedStates=a.storedStates||[],a.savedStates=a.savedStates||[],a.normalizeStore=function(){a.store.idToState=a.store.idToState||{},a.store.urlToId=a.store.urlToId||{},a.store.stateToId=a.store.stateToId||{}},a.getState=function(c,d){typeof c=="undefined"&&(c=true),typeof d=="undefined"&&(d=true);var b=a.getLastSavedState();return!b&&d&&(b=a.createStateObject()),c&&(b=a.cloneObject(b),b.url=b.cleanUrl||b.url),b},a.getIdByState=function(d){var b=a.extractId(d.url),c;if(!b){c=a.getStateString(d);if(typeof a.stateToId[c]!="undefined")b=a.stateToId[c];else if(typeof a.store.stateToId[c]!="undefined")b=a.store.stateToId[c];else{for(;;){b=+new Date+String(Math.random()).replace(/\D/g,"");if(typeof a.idToState[b]=="undefined"&&typeof a.store.idToState[b]=="undefined")break}a.stateToId[c]=b,a.idToState[b]=d}}return b},a.normalizeState=function(d){var b,e;if(!d||typeof d!="object")d={};if(typeof d.normalized!="undefined")return d;if(!d.data||typeof d.data!="object")d.data={};b={},b.normalized=true,b.title=d.title||"",b.url=a.getFullUrl(a.unescapeString(d.url||c.location.href)),b.hash=a.getShortUrl(b.url),b.data=a.cloneObject(d.data),b.id=a.getIdByState(b),b.cleanUrl=b.url.replace(/\??\&_suid.*/,""),b.url=b.cleanUrl,e=!a.isEmptyObject(b.data);if((b.title||e)&&!a.options.disableSuid)b.hash=a.getShortUrl(b.url).replace(/\??\&_suid.*/,""),/\?/.test(b.hash)||(b.hash+="?"),b.hash+="&_suid="+b.id;return b.hashedUrl=a.getFullUrl(b.hash),(a.emulated.pushState||a.bugs.safariPoll)&&a.hasUrlDuplicate(b)&&(b.url=b.hashedUrl),b},a.createStateObject=function(c,d,e){var b={data:c,title:d,url:e};return b=a.normalizeState(b),b},a.getStateById=function(b){b=String(b);var c=a.idToState[b]||a.store.idToState[b]||g;return c},a.getStateString=function(b){var c,e,f;return c=a.normalizeState(b),e={data:c.data,title:b.title,url:b.url},f=d.stringify(e),f},a.getStateId=function(d){var b,c;return b=a.normalizeState(d),c=b.id,c},a.getHashByState=function(d){var b,c;return b=a.normalizeState(d),c=b.hash,c},a.extractId=function(b){var c,a,d;return a=/(.*)\&_suid=([0-9]+)$/.exec(b),d=a?a[1]||b:b,c=a?String(a[2]||""):"",c||false},a.isTraditionalAnchor=function(a){return!/[\/\?\.]/.test(a)},a.extractState=function(d,e){var b=null,c,f;return e=e||false,c=a.extractId(d),c&&(b=a.getStateById(c)),b||(f=a.getFullUrl(d),c=a.getIdByUrl(f)||false,c&&(b=a.getStateById(c)),!b&&e&&!a.isTraditionalAnchor(d)&&(b=a.createStateObject(null,null,f))),b},a.getIdByUrl=function(b){return a.urlToId[b]||a.store.urlToId[b]||g},a.getLastSavedState=function(){return a.savedStates[a.savedStates.length-1]||g},a.getLastStoredState=function(){return a.storedStates[a.storedStates.length-1]||g},a.hasUrlDuplicate=function(c){var d=false,b;return b=a.extractState(c.url),d=b&&b.id!==c.id,d},a.storeState=function(b){return a.urlToId[b.url]=b.id,a.storedStates.push(a.cloneObject(b)),b},a.isLastSavedState=function(f){var b=false,c,d,e;return a.savedStates.length&&(c=f.id,d=a.getLastSavedState(),e=d.id,b=c===e),b},a.saveState=function(b){return a.isLastSavedState(b)?false:(a.savedStates.push(a.cloneObject(b)),true)},a.getStateByIndex=function(b){var c=null;return typeof b=="undefined"?c=a.savedStates[a.savedStates.length-1]:b<0?c=a.savedStates[a.savedStates.length+b]:c=a.savedStates[b],c},a.getHash=function(){return a.unescapeHash(c.location.hash)},a.unescapeString=function(d){for(var a=d,c;;){c=b.unescape(a);if(c===a)break;a=c}return a},a.unescapeHash=function(c){var b=a.normalizeHash(c);return b=a.unescapeString(b),b},a.normalizeHash=function(a){return a.replace(/[^#]*#/,"").replace(/#.*/,"")},a.setHash=function(e,f){var d,b,g;return f!==false&&a.busy()?(a.pushQueue({scope:a,callback:a.setHash,args:arguments,queue:f}),false):(d=a.escapeHash(e),a.busy(true),b=a.extractState(e,true),b&&!a.emulated.pushState?a.pushState(b.data,b.title,b.url,false):c.location.hash!==d&&(a.bugs.setHash?(g=a.getPageUrl(),a.pushState(null,null,g+"#"+d,false)):c.location.hash=d),a)},a.escapeHash=function(d){var c=a.normalizeHash(d);return c=b.escape(c),a.bugs.hashEscape||(c=c.replace(/\%21/g,"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?")),c},a.getHashByUrl=function(c){var b=String(c).replace(/([^#]*)#?([^#]*)#?(.*)/,"$2");return b=a.unescapeHash(b),b},a.setTitle=function(e){var b=e.title,d;b||(d=a.getStateByIndex(0),d&&d.url===e.url&&(b=d.title||a.options.initialTitle));try{c.getElementsByTagName("title")[0].innerHTML=b.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")}catch(f){}return c.title=b,a},a.queues=[],a.busy=function(b){typeof b!="undefined"?a.busy.flag=b:typeof a.busy.flag=="undefined"&&(a.busy.flag=false);if(!a.busy.flag){k(a.busy.timeout);var c=function(){var b,d,e;if(a.busy.flag)return;for(b=a.queues.length-1;b>=0;--b){d=a.queues[b];if(d.length===0)continue;e=d.shift(),a.fireQueueItem(e),a.busy.timeout=j(c,a.options.busyDelay)}};a.busy.timeout=j(c,a.options.busyDelay)}return a.busy.flag},a.busy.flag=false,a.fireQueueItem=function(b){return b.callback.apply(b.scope||a,b.args||[])},a.pushQueue=function(b){return a.queues[b.queue||0]=a.queues[b.queue||0]||[],a.queues[b.queue||0].push(b),a},a.queue=function(b,c){return typeof b=="function"&&(b={callback:b}),typeof c!="undefined"&&(b.queue=c),a.busy()?a.pushQueue(b):a.fireQueueItem(b),a},a.clearQueue=function(){return a.busy.flag=false,a.queues=[],a},a.stateChanged=false,a.doubleChecker=false,a.doubleCheckComplete=function(){return a.stateChanged=true,a.doubleCheckClear(),a},a.doubleCheckClear=function(){return a.doubleChecker&&(k(a.doubleChecker),a.doubleChecker=false),a},a.doubleCheck=function(b){return a.stateChanged=false,a.doubleCheckClear(),a.bugs.ieDoubleCheck&&(a.doubleChecker=j(function(){return a.doubleCheckClear(),a.stateChanged||b(),true},a.options.doubleCheckInterval)),a},a.safariStatePoll=function(){var e=a.extractState(c.location.href),d;if(!a.isLastSavedState(e))d=e;else return;return d||(d=a.createStateObject()),a.Adapter.trigger(b,"popstate"),a},a.back=function(b){return b!==false&&a.busy()?(a.pushQueue({scope:a,callback:a.back,args:arguments,queue:b}),false):(a.busy(true),a.doubleCheck(function(){a.back(false)}),i.go(-1),true)},a.forward=function(b){return b!==false&&a.busy()?(a.pushQueue({scope:a,callback:a.forward,args:arguments,queue:b}),false):(a.busy(true),a.doubleCheck(function(){a.forward(false)}),i.go(1),true)},a.go=function(c,d){var b;if(c>0)for(b=1;b<=c;++b)a.forward(d);else{if(!(c<0))throw new Error("History.go: History.go requires a positive or negative integer passed.");for(b=-1;b>=c;--b)a.back(d)}return a};if(a.emulated.pushState){var o=function(){};a.pushState=a.pushState||o,a.replaceState=a.replaceState||o}else a.onPopState=function(h,i){var f=false,d=false,g,e;return a.doubleCheckComplete(),g=a.getHash(),g?(e=a.extractState(g||c.location.href,true),e?a.replaceState(e.data,e.title,e.url,false):(a.Adapter.trigger(b,"anchorchange"),a.busy(false)),a.expectedStateId=false,false):(f=a.Adapter.extractEventData("state",h,i)||false,f?d=a.getStateById(f):a.expectedStateId?d=a.getStateById(a.expectedStateId):d=a.extractState(c.location.href),d||(d=a.createStateObject(null,null,c.location.href)),a.expectedStateId=false,a.isLastSavedState(d)?(a.busy(false),false):(a.storeState(d),a.saveState(d),a.setTitle(d),a.Adapter.trigger(b,"statechange"),a.busy(false),true))},a.Adapter.bind(b,"popstate",a.onPopState),a.pushState=function(f,g,d,e){if(a.getHashByUrl(d)&&a.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(e!==false&&a.busy())return a.pushQueue({scope:a,callback:a.pushState,args:arguments,queue:e}),false;a.busy(true);var c=a.createStateObject(f,g,d);return a.isLastSavedState(c)?a.busy(false):(a.storeState(c),a.expectedStateId=c.id,i.pushState(c.id,c.title,c.url),a.Adapter.trigger(b,"popstate")),true},a.replaceState=function(f,g,d,e){if(a.getHashByUrl(d)&&a.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(e!==false&&a.busy())return a.pushQueue({scope:a,callback:a.replaceState,args:arguments,queue:e}),false;a.busy(true);var c=a.createStateObject(f,g,d);return a.isLastSavedState(c)?a.busy(false):(a.storeState(c),a.expectedStateId=c.id,i.replaceState(c.id,c.title,c.url),a.Adapter.trigger(b,"popstate")),true};if(h){try{a.store=d.parse(h.getItem("History.store"))||{}}catch(p){a.store={}}a.normalizeStore()}else a.store={},a.normalizeStore();a.Adapter.bind(b,"beforeunload",a.clearAllIntervals),a.Adapter.bind(b,"unload",a.clearAllIntervals),a.saveState(a.storeState(a.extractState(c.location.href,true))),h&&(a.onUnload=function(){var b,c;try{b=d.parse(h.getItem("History.store"))||{}}catch(e){b={}}b.idToState=b.idToState||{},b.urlToId=b.urlToId||{},b.stateToId=b.stateToId||{};for(c in a.idToState){if(!a.idToState.hasOwnProperty(c))continue;b.idToState[c]=a.idToState[c]}for(c in a.urlToId){if(!a.urlToId.hasOwnProperty(c))continue;b.urlToId[c]=a.urlToId[c]}for(c in a.stateToId){if(!a.stateToId.hasOwnProperty(c))continue;b.stateToId[c]=a.stateToId[c]}a.store=b,a.normalizeStore(),h.setItem("History.store",d.stringify(b))},a.intervalList.push(l(a.onUnload,a.options.storeInterval)),a.Adapter.bind(b,"beforeunload",a.onUnload),a.Adapter.bind(b,"unload",a.onUnload));if(!a.emulated.pushState){a.bugs.safariPoll&&a.intervalList.push(l(a.safariStatePoll,a.options.safariPollInterval));if(f.vendor==="Apple Computer, Inc."||(f.appCodeName||"")==="Mozilla")a.Adapter.bind(b,"hashchange",function(){a.Adapter.trigger(b,"popstate")}),a.getHash()&&a.Adapter.onDomLoad(function(){a.Adapter.trigger(b,"hashchange")})}},a.init()}(window);
/*!
** License: http://codemirror.net/LICENSE
*/
var CodeMirror=function(){function a(Sc,Ec){var h={},Mc=a.defaults;for(var wc in Mc)if(Mc.hasOwnProperty(wc))h[wc]=(Ec&&Ec.hasOwnProperty(wc)?Ec:Mc)[wc];var jb=document.createElement("div");jb.className="CodeMirror"+(h.lineWrapping?" CodeMirror-wrap":"");jb.innerHTML='<div style="overflow: hidden; position: relative; width: 3px; height: 0px;"><textarea style="position: absolute; padding: 0; width: 1px; height: 1em" wrap="off" autocorrect="off" autocapitalize="off"></textarea></div><div class="CodeMirror-scroll" tabindex="-1"><div style="position: relative"><div style="position: relative"><div class="CodeMirror-gutter"><div class="CodeMirror-gutter-text"></div></div><div class="CodeMirror-lines"><div style="position: relative; z-index: 0"><div style="position: absolute; width: 100%; height: 0; overflow: hidden; visibility: hidden;"></div><pre class="CodeMirror-cursor">&#160;</pre><div style="position: relative; z-index: -1"></div><div></div></div></div></div></div></div>';if(Sc.appendChild)Sc.appendChild(jb);else Sc(jb);var Lb=jb.firstChild,H=Lb.firstChild,v=jb.lastChild,nb=v.firstChild,uc=nb.firstChild,mb=uc.firstChild,ac=mb.firstChild,R=mb.nextSibling.firstChild,Jb=R.firstChild,qb=Jb.nextSibling,jc=qb.nextSibling,sb=jc.nextSibling;kd();fd();if(P)H.style.width="0px";if(!N)R.draggable=true;R.style.outline="none";if(h.tabindex!=null)H.tabIndex=h.tabindex;h.autofocus&&yb();if(!h.gutter&&!h.lineNumbers)mb.style.display="none";if(O)Lb.style.height="1px",Lb.style.position="absolute";try{Jc("x")}catch(he){if(he.message.match(/runtime/i))he=new Error("A CodeMirror inside a P-style element does not work in Internet Explorer. (innerHTML bug)");throw he;}var Tc=new L,Wd=new L,Qc,kb,o=new w([new A([new i("")])]),zb,ub;ud();var j={from:{line:0,ch:0},to:{line:0,ch:0},inverted:false},rb,pc,Ub,zc=0,Cc,qc=false,fc=false,Gb,gc,tb,Zb,Eb,Vb,xb,bc,Sb,Wb=0,lb=0,ob=0,qd=0,Db,vb="",Cb,xd={};x(function(){wd(h.value||"");Gb=false})();var pb=new M;b(v,"mousedown",x(Rd));b(v,"dblclick",x(Md));b(R,"selectstart",d);!t&&b(v,"contextmenu",hd);b(v,"scroll",function(){zc=v.scrollTop;Kb([]);if(h.fixedGutter)mb.style.left=v.scrollLeft+"px";if(h.onScroll)h.onScroll(Z)});b(window,"resize",function(){Kb(true)});b(H,"keyup",x(ae));b(H,"input",cc);b(H,"keydown",x(rd));b(H,"keypress",x(Td));b(H,"focus",Rb);b(H,"blur",Rc);if(h.dragDrop){b(R,"dragstart",Qd);function Ad(a){if(h.onDragEvent&&h.onDragEvent(Z,r(a)))return;D(a)}b(v,"dragenter",Ad);b(v,"dragover",Ad);b(v,"drop",x(be))}b(v,"paste",function(){yb();cc()});b(H,"paste",cc);b(H,"cut",x(function(){!h.readOnly&&Nb("")}));O&&b(nb,"mouseup",function(){document.activeElement==H&&H.blur();yb()});var td;try{td=document.activeElement==H}catch(he){}if(td||h.autofocus)setTimeout(Rb,20);else Rc();function Mb(a){return a>=0&&a<o.size}var Z=jb.CodeMirror={getValue:Xd,setValue:x(wd),getSelection:hc,replaceSelection:x(Nb),focus:function(){window.focus();yb();Rb();cc()},setOption:function(a,b){var c=h[a];h[a]=b;if(a=="mode"||a=="indentUnit")ud();else if(a=="readOnly"&&b=="nocursor"){Rc();H.blur()}else if(a=="readOnly"&&!b)mc(true);else if(a=="theme")kd();else if(a=="lineWrapping"&&c!=b)x(Hd)();else if(a=="tabSize")Kb(true);else a=="keyMap"&&fd();if(a=="lineNumbers"||a=="gutter"||a=="firstLineNumber"||a=="theme"){Ld();Kb(true)}},getOption:function(a){return h[a]},undo:x(fe),redo:x(ee),indentLine:x(function(b,a){if(typeof a!="string")if(a==null)a=h.smartIndent?"smart":"prev";else a=a?"add":"subtract";Mb(b)&&lc(b,a)}),indentSelection:x(Jd),historySize:function(){return{undo:pb.done.length,redo:pb.undone.length}},clearHistory:function(){pb=new M},matchBrackets:x(function(){gd(true)}),getTokenAt:x(function(a){a=eb(a);return E(a.line).getTokenAt(kb,ec(a.line),a.ch)}),getStateAfter:function(a){a=sc(a==null?o.size-1:a);return ec(a+1)},cursorCoords:function(a,b){if(a==null)a=j.inverted;return this.charCoords(a?j.from:j.to,b)},charCoords:function(a,b){a=eb(a);return b=="local"?Ab(a,false):b=="div"?Ab(a,true):Ud(a)},coordsChar:function(a){var b=k(R);return Kc(a.x-b.left,a.y-b.top)},markText:x(Oc),setBookmark:Sd,findMarksAt:Pd,setMarker:x(Fd),clearMarker:x(Cd),setLineClass:x(Od),hideLine:x(function(a){return Ac(a,true)}),showLine:x(function(a){return Ac(a,false)}),onDeleteLine:function(a,b){if(typeof a=="number"){if(!Mb(a))return null;a=E(a)}(a.handlers||(a.handlers=[])).push(b);return a},lineInfo:Yd,addWidget:function(c,a,h,g,e){c=Ab(eb(c));var d=c.yBot,b=c.x;a.style.position="absolute";nb.appendChild(a);if(g=="over")d=c.y;else if(g=="near"){var i=Math.max(v.offsetHeight,o.height*Hb()),f=Math.max(nb.clientWidth,R.clientWidth)-Hc();if(c.yBot+a.offsetHeight>i&&c.y>a.offsetHeight)d=c.y-a.offsetHeight;if(b+a.offsetWidth>f)b=f-a.offsetWidth}a.style.top=d+Qb()+"px";a.style.left=a.style.right="";if(e=="right"){b=nb.clientWidth-a.offsetWidth;a.style.right="0px"}else{if(e=="left")b=0;else if(e=="middle")b=(nb.clientWidth-a.offsetWidth)/2;a.style.left=b+Hc()+"px"}h&&dd(b,d,b+a.offsetWidth,d+a.offsetHeight)},lineCount:function(){return o.size},clipPos:eb,getCursor:function(a){if(a==null)a=j.inverted;return gb(a?j.from:j.to)},somethingSelected:function(){return!c(j.from,j.to)},setCursor:x(function(a,c,b){if(c==null&&typeof a.line=="number")Ib(a.line,a.ch,b);else Ib(a,c,b)}),setSelection:x(function(a,c,b){(b?Fb:Xb)(eb(a),eb(c||a))}),getLine:function(a){if(Mb(a))return E(a).text},getLineHandle:function(a){if(Mb(a))return E(a)},setLine:x(function(a,b){Mb(a)&&wb(b,{line:a,ch:0},{line:a,ch:E(a).text.length})}),removeLine:x(function(a){Mb(a)&&wb("",{line:a,ch:0},eb({line:a+1,ch:0}))}),replaceRange:x(wb),getRange:function(a,b){return sd(eb(a),eb(b))},triggerOnKeyDown:x(rd),execCommand:function(a){return U[a](Z)},moveH:x(ce),deleteH:x(Zd),moveV:x(de),toggleOverwrite:function(){if(qc){qc=false;qb.className=qb.className.replace(" CodeMirror-overwrite","")}else{qc=true;qb.className+=" CodeMirror-overwrite"}},posFromIndex:function(a){var b=0,c;o.iter(0,o.size,function(e){var d=e.text.length+1;if(d>a){c=a;return true}a-=d;++b});return eb({line:b,ch:c})},indexFromPos:function(a){if(a.line<0||a.ch<0)return 0;var b=a.ch;o.iter(0,a.line,function(a){b+=a.text.length+1});return b},scrollTo:function(a,b){if(a!=null)v.scrollLeft=a;if(b!=null)v.scrollTop=b;Kb([])},operation:function(a){return x(a)()},compoundChange:function(a){return cd(a)},refresh:function(){Kb(true);if(v.scrollHeight>zc)v.scrollTop=zc},getInputField:function(){return H},getWrapperElement:function(){return jb},getScrollerElement:function(){return v},getGutterElement:function(){return mb}};function E(a){return fb(o,a)}function Tb(b,c){xb=true;for(var d=c-b.height,a=b;a;a=a.parent)a.height+=d}function wd(b){var a={line:0,ch:0};od(a,{line:o.size-1,ch:E(o.size-1).text.length},q(b),a,a);Gb=true}function Xd(){var a=[];o.iter(0,o.size,function(b){a.push(b.text)});return a.join("\n")}function Rd(g){vd(e(g,"shiftKey"));for(var i=C(g);i!=jb;i=i.parentNode)if(i.parentNode==nb&&i!=uc)return;for(var i=C(g);i!=jb;i=i.parentNode)if(i.parentNode==ac){if(h.onGutterClick)h.onGutterClick(Z,s(ac.childNodes,i)+lb,g);return d(g)}var a=Ob(g);switch(V(g)){case 3:t&&!Q&&hd(g);return;case 2:a&&Ib(a.line,a.ch,true);setTimeout(yb,20);return}if(!a){C(g)==v&&d(g);return}!ub&&Rb();var k=+new Date;if(Ub&&Ub.time>k-400&&c(Ub.pos,a)){d(g);setTimeout(yb,20);return Vd(a.line)}else if(pc&&pc.time>k-400&&c(pc.pos,a)){Ub={time:k,pos:a};d(g);return jd(a)}else pc={time:k,pos:a};var q=a,l;if(h.dragDrop&&cb&&!h.readOnly&&!c(j.from,j.to)&&!f(a,j.from)&&!f(j.to,a)){if(N)R.draggable=true;function n(b){if(N)R.draggable=false;Cc=false;r();u();if(Math.abs(g.clientX-b.clientX)+Math.abs(g.clientY-b.clientY)<10){d(b);Ib(a.line,a.ch,true);yb()}}var r=b(document,"mouseup",x(n),true),u=b(v,"drop",x(n),true);Cc=true;R.dragDrop&&R.dragDrop();return}d(g);Ib(a.line,a.ch,true);function o(e){var b=Ob(e,true);if(b&&!c(b,q)){!ub&&Rb();q=b;Fb(a,b);Gb=false;var d=md();if(b.line>=d.to||b.line<d.from)l=setTimeout(x(function(){o(e)}),150)}}function p(c){clearTimeout(l);var b=Ob(c);b&&Fb(a,b);d(c);yb();Gb=true;w();r()}var w=b(document,"mousemove",x(function(a){clearTimeout(l);d(a);if(!m&&!V(a))p(a);else o(a)}),true),r=b(document,"mouseup",x(p),true)}function Md(a){for(var b=C(a);b!=jb;b=b.parentNode)if(b.parentNode==ac)return d(a);var c=Ob(a);if(!c)return;Ub={time:+new Date,pos:c};d(a);jd(c)}function be(b){if(h.onDragEvent&&h.onDragEvent(Z,r(b)))return;b.preventDefault();var a=Ob(b,true),c=b.dataTransfer.files;if(!a||h.readOnly)return;if(c&&c.length&&window.FileReader&&window.File){function g(c,e){var b=new FileReader;b.onload=function(){d[e]=b.result;if(++i==f){a=eb(a);x(function(){var b=wb(d.join(""),a,a);Fb(a,b)})()}};b.readAsText(c)}for(var f=c.length,d=Array(f),i=0,e=0;e<f;++e)g(c[e],e)}else try{var d=b.dataTransfer.getData("Text");d&&cd(function(){var b=j.from,c=j.to;Fb(a,a);Cc&&wb("",b,c);Nb(d);yb()})}catch(b){}}function Qd(b){var c=hc();b.dataTransfer.setData("Text",c);if(t||W){var a=document.createElement("img");a.scr="data:image/gif;base64,R0lGODdhAgACAIAAAAAAAP///ywAAAAAAgACAAACAoRRADs=";b.dataTransfer.setDragImage(a,0,0)}}function dc(a,b){if(typeof a=="string"){a=U[a];if(!a)return false}var c=rb;try{if(h.readOnly)fc=true;if(b)rb=null;a(Z)}catch(d){if(d!=Y)throw d;return false}finally{rb=c;fc=false}return true}function Wc(a){var i=K(h.keyMap),f=i.auto;clearTimeout(Yc);if(f&&!ab(a))Yc=setTimeout(function(){if(K(h.keyMap)==i)h.keyMap=f.call?f.call(null,Z):f},50);var b=l[e(a,"keyCode")],c=false;if(b==null||a.altGraphKey)return false;if(e(a,"altKey"))b="Alt-"+b;if(e(a,"ctrlKey"))b="Ctrl-"+b;if(e(a,"metaKey"))b="Cmd-"+b;var j=false;function g(){j=true}if(e(a,"shiftKey"))c=B("Shift-"+b,h.extraKeys,h.keyMap,function(a){return dc(a,true)},g)||B(b,h.extraKeys,h.keyMap,function(a){if(typeof a=="string"&&/^go[A-Z]/.test(a))return dc(a)},g);else c=B(b,h.extraKeys,h.keyMap,dc,g);if(j)c=false;if(c){d(a);ic();if(m){a.oldKeyCode=a.keyCode;a.keyCode=0}}return c}function Dd(c,b){var a=B("'"+b+"'",h.extraKeys,h.keyMap,function(a){return dc(a,true)});if(a){d(c);ic()}return a}var xc=null,Yc;function rd(a){!ub&&Rb();if(m&&a.keyCode==27)a.returnValue=false;if(Pb)if(rc())Pb=false;if(h.onKeyEvent&&h.onKeyEvent(Z,r(a)))return;var b=e(a,"keyCode");vd(b==16||e(a,"shiftKey"));var c=Wc(a);if(window.opera){xc=c?b:null;!c&&b==88&&e(a,Q?"metaKey":"ctrlKey")&&Nb("")}}function Td(a){Pb&&rc();if(h.onKeyEvent&&h.onKeyEvent(Z,r(a)))return;var c=e(a,"keyCode"),b=e(a,"charCode");if(window.opera&&c==xc){xc=null;d(a);return}if((window.opera&&(!a.which||a.which<10)||O)&&Wc(a))return;var f=String.fromCharCode(b==null?c:b);if(h.electricChars&&kb.electricChars&&h.smartIndent&&!h.readOnly)kb.electricChars.indexOf(f)>-1&&setTimeout(x(function(){lc(j.to.line,"smart")}),75);if(Dd(a,f))return;cc()}function ae(a){if(h.onKeyEvent&&h.onKeyEvent(Z,r(a)))return;if(e(a,"keyCode")==16)rb=null}function Rb(){if(h.readOnly=="nocursor")return;if(!ub){if(h.onFocus)h.onFocus(Z);ub=true;if(jb.className.search(/\bCodeMirror-focused\b/)==-1)jb.className+=" CodeMirror-focused";!Vb&&mc(true)}tc();ic()}function Rc(){if(ub){if(h.onBlur)h.onBlur(Z);ub=false;Db&&x(function(){if(Db){Db();Db=null}})();jb.className=jb.className.replace(" CodeMirror-focused","")}clearInterval(Qc);setTimeout(function(){if(!ub)rb=null},150)}function od(a,d,b,e,f){if(fc)return;if(pb){var c=[];o.iter(a.line,d.line+1,function(a){c.push(a.text)});pb.addChange(a.line,b.length,c);while(pb.done.length>h.undoDepth)pb.done.shift()}Vc(a,d,b,e,f)}function ld(e,i){if(!e.length)return;for(var h=e.pop(),f=[],d=h.length-1;d>=0;d-=1){var a=h[d],b=[],c=a.start+a.added;o.iter(a.start,c,function(a){b.push(a.text)});f.push({start:a.start,added:a.old.length,old:b});var g=eb({line:a.start+a.old.length-1,ch:hb(b[b.length-1],a.old[a.old.length-1])});Vc({line:a.start,ch:0},{line:c-1,ch:E(c-1).text.length},a.old,g,g)}Gb=true;i.push(f)}function fe(){ld(pb.done,pb.undone)}function ee(){ld(pb.undone,pb.done)}function Vc(a,c,b,z,A){if(fc)return;var q=false,r=vb.length;!h.lineWrapping&&o.iter(a.line,c.line+1,function(a){if(!a.hidden&&a.text.length==r){q=true;return true}});if(a.line!=c.line||b.length>1)xb=true;var k=c.line-a.line,e=E(a.line),f=E(c.line);if(a.ch==0&&c.ch==0&&b[b.length-1]==""){var g=[],s=null;if(a.line){s=E(a.line-1);s.fixMarkEnds(f)}else f.fixMarkStarts();for(var d=0,t=b.length-1;d<t;++d)g.push(i.inheritMarks(b[d],s));k&&o.remove(a.line,k,bc);g.length&&o.insert(a.line,g)}else if(e==f)if(b.length==1)e.replace(a.ch,c.ch,b[0]);else{f=e.split(c.ch,b[b.length-1]);e.replace(a.ch,null,b[0]);e.fixMarkEnds(f);for(var g=[],d=1,t=b.length-1;d<t;++d)g.push(i.inheritMarks(b[d],e));g.push(f);o.insert(a.line+1,g)}else if(b.length==1){e.replace(a.ch,null,b[0]);f.replace(null,c.ch,"");e.append(f);o.remove(a.line+1,k,bc)}else{var g=[];e.replace(a.ch,null,b[0]);f.replace(null,c.ch,b[b.length-1]);e.fixMarkEnds(f);for(var d=1,t=b.length-1;d<t;++d)g.push(i.inheritMarks(b[d],e));k>1&&o.remove(a.line+1,k-1,bc);o.insert(a.line+1,g)}if(h.lineWrapping){var y=Math.max(5,v.clientWidth/oc()-3);o.iter(a.line,a.line+b.length,function(a){if(a.hidden)return;var b=Math.ceil(a.text.length/y)||1;b!=a.height&&Tb(a,b)})}else{o.iter(a.line,a.line+b.length,function(b){var a=b.text;if(!b.hidden&&a.length>r){vb=a;r=a.length;Cb=null;q=false}});if(q)Sb=true}for(var m=[],l=b.length-k-1,d=0,B=zb.length;d<B;++d){var n=zb[d];if(n<a.line)m.push(n);else n>c.line&&m.push(n+l)}var x=a.line+Math.min(b.length,500);Id(a.line,x);m.push(x);zb=m;Ic(100);tb.push({from:a.line,to:c.line+1,diff:l});var w={from:a,to:c,text:b};if(Zb){for(var p=Zb;p.next;p=p.next);p.next=w}else Zb=w;function u(a){return a<=Math.min(c.line,c.line+l)?a:a+l}Xb(z,A,u(j.from.line),u(j.to.line));if(v.clientHeight)nb.style.height=o.height*Hb()+2*Qb()+"px"}function Ed(){var a=0;vb="";Cb=null;o.iter(0,o.size,function(c){var b=c.text;if(!c.hidden&&b.length>a){a=b.length;vb=b}});Sb=false}function wb(c,b,a){b=eb(b);if(!a)a=b;else a=eb(a);c=q(c);function e(e){if(f(e,b))return e;if(!f(a,e))return d;var h=e.line+c.length-(a.line-b.line)-1,g=e.ch;if(e.line==a.line)g+=c[c.length-1].length-(a.ch-(a.line==b.line?b.ch:0));return{line:h,ch:g}}var d;id(c,b,a,function(a){d=a;return{from:e(j.from),to:e(j.to)}});return d}function Nb(b,a){id(q(b),j.from,j.to,function(b){return a=="end"?{from:b,to:b}:a=="start"?{from:j.from,to:j.from}:{from:j.from,to:b}})}function id(a,b,f,d){var e=a.length==1?a[0].length+b.ch:a[a.length-1].length,c=d({line:b.line+a.length-1,ch:e});od(b,f,a,c.from,c.to)}function sd(c,e){var a=c.line,d=e.line;if(a==d)return E(a).text.slice(c.ch,e.ch);var b=[E(a).text.slice(c.ch)];o.iter(a+1,d,function(a){b.push(a.text)});b.push(E(d).text.slice(0,e.ch));return b.join("\n")}function hc(){return sd(j.from,j.to)}var Pb=false;function tc(){if(Pb)return;Tc.set(h.pollInterval,function(){yc();rc();ub&&tc();Dc()})}function cc(){var a=false;Pb=true;function b(){yc();var c=rc();if(!c&&!a){a=true;Tc.set(60,b)}else{Pb=false;tc()}Dc()}Tc.set(20,b)}var Bb="";function rc(){if(Vb||!ub||bb(H)||h.readOnly)return false;var b=H.value;if(b==Bb)return false;rb=null;var a=0,d=Math.min(Bb.length,b.length);while(a<d&&Bb[a]==b[a])++a;if(a<Bb.length)j.from={line:j.from.line,ch:j.from.ch-(Bb.length-a)};else if(qc&&c(j.from,j.to))j.to={line:j.to.line,ch:Math.min(E(j.to.line).text.length,j.to.ch+(b.length-a))};Nb(b.slice(a),"end");if(b.length>1e3)H.value=Bb="";else Bb=b;return true}function mc(a){if(!c(j.from,j.to)){Bb="";H.value=hc();S(H)}else if(a)Bb=H.value=""}function yb(){h.readOnly!="nocursor"&&H.focus()}function Bd(){if(!qb.getBoundingClientRect)return;var a=qb.getBoundingClientRect();if(m&&a.top==a.bottom)return;var b=window.innerHeight||Math.max(document.body.offsetHeight,document.documentElement.offsetHeight);(a.top<0||a.bottom>b)&&qb.scrollIntoView()}function Uc(){var a=Ab(j.inverted?j.from:j.to),b=h.lineWrapping?Math.min(a.x,R.offsetWidth):a.x;return dd(b,a.y,b,a.yBot)}function dd(b,f,c,g){var e=Hc(),o=Qb();f+=o;g+=o;b+=e;c+=e;var n=v.clientHeight,j=v.scrollTop,a=false,m=true;if(f<j){v.scrollTop=Math.max(0,f);a=true}else if(g>j+n){v.scrollTop=g-n;a=true}var k=v.clientWidth,i=v.scrollLeft,d=h.fixedGutter?mb.clientWidth:0,l=b<d+e+10;if(b<i+d||l){if(l)b=0;v.scrollLeft=Math.max(0,b-10-d);a=true}else if(c>k+i-3){v.scrollLeft=c+10-k;a=true;if(c>nb.clientWidth)m=false}if(a&&h.onScroll)h.onScroll(Z);return m}function md(){var b=Hb(),a=v.scrollTop-Qb(),c=Math.max(0,Math.floor(a/b)),d=Math.ceil((a+v.clientHeight)/b);return{from:G(o,c),to:G(o,d)}}function Kb(f,m){if(!v.clientWidth){lb=ob=Wb=0;return}var g=md();if(f!==true&&f.length==0&&g.from>lb&&g.to<ob)return;var a=Math.max(g.from-100,0),c=Math.min(o.size,g.to+100);if(lb<a&&a-lb<20)a=lb;if(ob>c&&ob-c<20)c=Math.min(o.size,ob);for(var d=f===true?[]:Kd([{from:lb,to:ob,domStart:0}],f),k=0,i=0;i<d.length;++i){var b=d[i];if(b.from<a){b.domStart+=a-b.from;b.from=a}if(b.to>c)b.to=c;if(b.from>=b.to)d.splice(i--,1);else k+=b.to-b.from}if(k==c-a&&a==lb&&c==ob)return;d.sort(function(a,b){return a.domStart-b.domStart});var e=Hb(),n=mb.style.display;sb.style.display="none";Nd(a,c,d);sb.style.display=mb.style.display="";var l=a!=lb||c!=ob||qd!=v.clientHeight+e;if(l)qd=v.clientHeight+e;lb=a;ob=c;Wb=F(o,a);uc.style.top=Wb*e+"px";if(v.clientHeight)nb.style.height=o.height*e+2*Qb()+"px";if(sb.childNodes.length!=ob-lb)throw new Error("BAD PATCH! "+JSON.stringify(d)+" size="+(ob-lb)+" nodes="+sb.childNodes.length);function j(){Cb=v.clientWidth;var b=sb.firstChild,a=false;o.iter(lb,ob,function(c){if(!c.hidden){var d=Math.round(b.offsetHeight/e)||1;if(c.height!=d){Tb(c,d);xb=a=true}}b=b.nextSibling});if(a)nb.style.height=o.height*e+2*Qb()+"px";return a}if(h.lineWrapping)j();else{if(Cb==null)Cb=Jc(vb);if(Cb>v.clientWidth){R.style.width=Cb+"px";nb.style.width="";nb.style.width=v.scrollWidth+"px"}else R.style.width=nb.style.width=""}mb.style.display=n;if(l||xb)Fc()&&h.lineWrapping&&j()&&Fc();ad();if(!m&&h.onUpdate)h.onUpdate(Z);return true}function Kd(d,h){for(var f=0,j=h.length||0;f<j;++f){for(var b=h[f],c=[],e=b.diff||0,g=0,i=d.length;g<i;++g){var a=d[g];if(b.to<=a.from&&b.diff)c.push({from:a.from+e,to:a.to+e,domStart:a.domStart});else if(b.to<=a.from||b.from>=a.to)c.push(a);else{b.from>a.from&&c.push({from:a.from,to:b.from,domStart:a.domStart});b.to<a.to&&c.push({from:b.to+e,to:a.to+e,domStart:a.domStart+(b.to-a.from)})}}d=c}return d}function Nd(j,k,c){if(!c.length)sb.innerHTML="";else{function i(a){var b=a.nextSibling;a.parentNode.removeChild(a);return b}for(var f=0,a=sb.firstChild,m,h=0;h<c.length;++h){var g=c[h];while(g.domStart>f){a=i(a);f++}for(var d=0,l=g.to-g.from;d<l;++d){a=a.nextSibling;f++}}while(a)a=i(a)}var b=c.shift(),a=sb.firstChild,d=j,e=document.createElement("div");o.iter(j,k,function(f){if(b&&b.to==d)b=c.shift();if(!b||b.from>d){if(f.hidden)var g=e.innerHTML="<pre></pre>";else{var g="<pre"+(f.className?' class="'+f.className+'"':"")+">"+f.getHTML(yd)+"</pre>";if(f.bgClassName)g='<div style="position: relative"><pre class="'+f.bgClassName+'" style="position: absolute; left: 0; right: 0; top: 0; bottom: 0; z-index: -2">&#160;</pre>'+g+"</div>"}e.innerHTML=g;sb.insertBefore(e.firstChild,a)}else a=a.nextSibling;++d})}function Fc(){if(!h.gutter&&!h.lineNumbers)return;var g=uc.offsetHeight,f=v.clientHeight;mb.style.height=(g-f<2?f:g)+"px";var a=[],e=lb,c;o.iter(lb,Math.max(ob,lb+1),function(f){if(f.hidden)a.push("<pre></pre>");else{var b=f.gutterMarker,d=h.lineNumbers?e+h.firstLineNumber:null;if(b&&b.text)d=b.text.replace("%N%",d!=null?d:"");else if(d==null)d=" ";a.push(b&&b.style?'<pre class="'+b.style+'">':"<pre>",d);for(var g=1;g<f.height;++g)a.push("<br/>&#160;");a.push("</pre>");if(!b)c=e}++e});mb.style.display="none";ac.innerHTML=a.join("");if(c!=null){var d=ac.childNodes[c-lb],i=String(o.size).length,k=ib(d),b="";while(k.length+b.length<i)b+=" ";b&&d.insertBefore(document.createTextNode(b),d.firstChild)}mb.style.display="";var j=Math.abs((parseInt(R.style.marginLeft)||0)-mb.offsetWidth)>2;R.style.marginLeft=mb.offsetWidth+"px";xb=false;return j}function ad(){var n=c(j.from,j.to),a=Ab(j.from,true),b=n?a:Ab(j.to,true),d=j.inverted?a:b,e=Hb(),q=k(jb),p=k(sb);Lb.style.top=Math.max(0,Math.min(v.offsetHeight,d.y+p.top-q.top))+"px";Lb.style.left=Math.max(0,Math.min(v.offsetWidth,d.x+p.left-q.left))+"px";if(n){qb.style.top=d.y+"px";qb.style.left=(h.lineWrapping?Math.min(d.x,R.offsetWidth):d.x)+"px";qb.style.display="";jc.style.display="none"}else{var o=a.y==b.y,r="",f=R.clientWidth||R.offsetWidth,i=R.clientHeight||R.offsetHeight;function g(b,e,a,c){var d=db?"width: "+(!a?f:f-a-b)+"px":"right: "+a+"px";r+='<div class="CodeMirror-selected" style="position: absolute; left: '+b+"px; top: "+e+"px; "+d+"; height: "+c+'px"></div>'}if(j.from.ch&&a.y>=0){var s=o?f-b.x:0;g(a.x,a.y,s,e)}var m=Math.max(0,a.y+(j.from.ch?e:0)),l=Math.min(b.y,i)-m;l>.2*e&&g(0,m,0,l);(!o||!j.from.ch)&&b.y<i-.5*e&&g(0,b.y,f-b.x,e);jc.innerHTML=r;qb.style.display="none";jc.style.display=""}}function vd(a){if(a)rb=rb||(j.inverted?j.to:j.from);else rb=null}function Fb(b,c){var a=rb&&eb(rb);if(a)if(f(a,b))b=a;else if(f(c,a))c=a;Xb(b,c);gc=true}function Xb(a,b,e,g){kc=null;if(e==null){e=j.from.line;g=j.to.line}if(c(j.from,a)&&c(j.to,b))return;if(f(b,a)){var l=b;b=a;a=l}if(a.line!=e){var i=nc(a,e,j.from.ch);if(!i)Ac(a.line,false);else a=i}if(b.line!=g)b=nc(b,g,j.to.ch);if(c(a,b))j.inverted=false;else if(c(a,j.to))j.inverted=false;else if(c(b,j.from))j.inverted=true;if(h.autoClearEmptyLines&&c(j.from,j.to)){var k=j.inverted?a:b;if(k.line!=j.from.line&&j.from.line<o.size){var d=E(j.from.line);/^\s+$/.test(d.text)&&setTimeout(x(function(){if(d.parent&&/^\s+$/.test(d.text)){var a=p(d);wb("",{line:a,ch:0},{line:a,ch:d.text.length})}},10))}}j.from=a;j.to=b;Eb=true}function nc(a,e,c){function b(g){var b=a.line+g,h=g==1?o.size:-1;while(b!=h){var e=E(b);if(!e.hidden){var d=a.ch;if(f||d>c||d>e.text.length)d=e.text.length;return{line:b,ch:d}}b+=g}}var d=E(a.line),f=a.ch==d.text.length&&a.ch!=c;return!d.hidden?a:a.line>=e?b(1)||b(-1):b(-1)||b(1)}function Ib(b,d,c){var a=eb({line:b,ch:d||0});(c?Fb:Xb)(a,a)}function sc(a){return Math.max(0,Math.min(a,o.size-1))}function eb(a){if(a.line<0)return{line:0,ch:0};if(a.line>=o.size)return{line:o.size-1,ch:E(o.size-1).text.length};var b=a.ch,c=E(a.line).text.length;return b==null||b>c?{line:a.line,ch:c}:b<0?{line:a.line,ch:0}:a}function Nc(a,f){var h=j.inverted?j.from:j.to,e=h.line,c=h.ch,d=E(e);function i(){for(var b=e+a,f=a<0?-1:o.size;b!=f;b+=a){var c=E(b);if(!c.hidden){e=b;d=c;return true}}}function b(b){if(c==(a<0?0:d.text.length))if(!b&&i())c=a<0?d.text.length:0;else return false;else c+=a;return true}if(f=="char")b();else if(f=="column")b(true);else if(f=="word")for(var g=false;;){if(a<0)if(!b())break;if(I(d.text.charAt(c)))g=true;else if(g){if(a<0){a=1;b()}break}if(a>0)if(!b())break}return{line:e,ch:c}}function ce(b,d){var a=b<0?j.from:j.to;if(rb||c(j.from,j.to))a=Nc(b,d);Ib(a.line,a.ch,true)}function Zd(a,b){if(!c(j.from,j.to))wb("",j.from,j.to);else if(a<0)wb("",Nc(a,b),j.to);else wb("",j.from,Nc(a,b));gc=true}var kc=null;function de(e,d){var c=0,a=Ab(j.inverted?j.from:j.to,true);if(kc!=null)a.x=kc;if(d=="page")c=Math.min(v.clientHeight,window.innerHeight||document.documentElement.clientHeight);else if(d=="line")c=Hb();var b=Kc(a.x,a.y+c*e+2);if(d=="page")v.scrollTop+=Ab(b,true).y-a.y;Ib(b.line,b.ch,true);kc=a.x}function jd(a){var d=E(a.line).text,b=a.ch,c=a.ch;while(b>0&&I(d.charAt(b-1)))--b;while(c<d.length&&I(d.charAt(c)))++c;Fb({line:a.line,ch:b},{line:a.line,ch:c})}function Vd(a){Fb({line:a,ch:0},eb({line:a+1,ch:0}))}function Jd(b){if(c(j.from,j.to))return lc(j.from.line,b);for(var d=j.to.line-(j.to.ch?0:1),a=j.from.line;a<=d;++a)lc(a,b)}function lc(c,b){if(!b)b="add";if(b=="smart")if(!kb.indent)b="prev";else var l=ec(c);var d=E(c),g=d.indentation(h.tabSize),e=d.text.match(/^\s*/)[0],a;if(b=="prev")if(c)a=E(c-1).indentation(h.tabSize);else a=0;else if(b=="smart")a=kb.indent(l,d.text.slice(e.length),d.text);else if(b=="add")a=g+h.indentUnit;else if(b=="subtract")a=g-h.indentUnit;a=Math.max(0,a);var m=a-g;if(!m){if(j.from.line!=c&&j.to.line!=c)return;var f=e}else{var f="",i=0;if(h.indentWithTabs)for(var k=Math.floor(a/h.tabSize);k;--k){i+=h.tabSize;f+="\t"}while(i<a){++i;f+=" "}}wb(f,{line:c,ch:0},{line:c,ch:e.length})}function ud(){kb=a.getMode(h,h.mode);o.iter(0,o.size,function(a){a.stateAfter=null});zb=[0];Ic()}function Ld(){var a=h.gutter||h.lineNumbers;mb.style.display=a?"":"none";if(a)xb=true;else sb.parentNode.style.marginLeft=0}function Hd(){if(h.lineWrapping){jb.className+=" CodeMirror-wrap";var a=v.clientWidth/oc()-3;o.iter(0,o.size,function(b){if(b.hidden)return;var c=Math.ceil(b.text.length/a)||1;c!=1&&Tb(b,c)});R.style.width=nb.style.width=""}else{jb.className=jb.className.replace(" CodeMirror-wrap","");Cb=null;vb="";o.iter(0,o.size,function(a){a.height!=1&&!a.hidden&&Tb(a,1);if(a.text.length>vb.length)vb=a.text})}tb.push({from:0,to:o.size})}function yd(e){var a=h.tabSize-e%h.tabSize,b=xd[a];if(b)return b;for(var c='<span class="cm-tab">',d=0;d<a;++d)c+=" ";return xd[a]={html:c+"</span>",width:a}}function kd(){v.className=v.className.replace(/\s*cm-s-\S+/g,"")+h.theme.replace(/(^|\s)\s*/g," cm-s-")}function fd(){var a=g[h.keyMap].style;jb.className=jb.className.replace(/\s*cm-keymap-\S+/g,"")+(a?" cm-keymap-"+a:"")}function Lc(){this.set=[]}Lc.prototype.clear=x(function(){for(var a=Infinity,e=-Infinity,f=0,h=this.set.length;f<h;++f){var d=this.set[f],b=d.marked;if(!b||!d.parent)continue;var g=p(d);a=Math.min(a,g);e=Math.max(e,g);for(var c=0;c<b.length;++c)b[c].marker==this&&b.splice(c--,1)}a!=Infinity&&tb.push({from:a,to:e+1})});Lc.prototype.find=function(){for(var e,h,c=0,i=this.set.length;c<i;++c)for(var f=this.set[c],g=f.marked,d=0;d<g.length;++d){var a=g[d];if(a.marker==this)if(a.from!=null||a.to!=null){var b=p(f);if(b!=null){if(a.from!=null)e={line:b,ch:a.from};if(a.to!=null)h={line:b,ch:a.to}}}}return{from:e,to:h}};function Oc(a,b,c){a=eb(a);b=eb(b);var e=new Lc;if(!f(a,b))return e;function d(c,b,d,a){E(c).addMark(new z(b,d,a,e))}if(a.line==b.line)d(a.line,a.ch,b.ch,c);else{d(a.line,a.ch,null,c);for(var g=a.line+1,h=b.line;g<h;++g)d(g,null,null,c);d(b.line,null,b.ch,c)}tb.push({from:a.line,to:b.line+1});return e}function Sd(a){a=eb(a);var b=new T(a.ch);E(a.line).addMark(b);return b}function Pd(b){b=eb(b);var c=[],d=E(b.line).marked;if(!d)return c;for(var e=0,f=d.length;e<f;++e){var a=d[e];(a.from==null||a.from<=b.ch)&&(a.to==null||a.to>=b.ch)&&c.push(a.marker||a)}return c}function Fd(a,c,b){if(typeof a=="number")a=E(sc(a));a.gutterMarker={text:c,style:b};xb=true;return a}function Cd(a){if(typeof a=="number")a=E(sc(a));a.gutterMarker=null;xb=true}function pd(a,d){var b=a,c=a;if(typeof a=="number")c=E(sc(a));else b=p(a);if(b==null)return null;if(d(c,b))tb.push({from:b,to:b+1});else return null;return c}function Od(c,b,a){return pd(c,function(c){if(c.className!=b||c.bgClassName!=a){c.className=b;c.bgClassName=a;return true}})}function Ac(b,a){return pd(b,function(d,e){if(d.hidden!=a){d.hidden=a;if(!h.lineWrapping){var f=d.text;if(a&&f.length==vb.length)Sb=true;else if(!a&&f.length>vb.length){vb=f;Cb=null;Sb=false}}Tb(d,a?0:1);var b=j.from.line,c=j.to.line;if(a&&(b==e||c==e)){var i=b==e?nc({line:b,ch:0},b,0):j.from,g=c==e?nc({line:c,ch:0},c,0):j.to;if(!g)return;Xb(i,g)}return xb=true}})}function Yd(a){if(typeof a=="number"){if(!Mb(a))return null;var c=a;a=E(a);if(!a)return null}else{var c=p(a);if(c==null)return null}var b=a.gutterMarker;return{line:c,handle:a,text:a.text,markerText:b&&b.text,markerClass:b&&b.style,lineClass:a.className,bgClass:a.bgClassName}}function Jc(a){Jb.innerHTML="<pre><span>x</span></pre>";Jb.firstChild.firstChild.firstChild.nodeValue=a;return Jb.firstChild.firstChild.offsetWidth||10}var zd="CodeMirror-temp-"+Math.floor(Math.random()*16777215).toString(16);function Gc(d,a){if(a==0)return{top:0,left:0};var g=h.lineWrapping&&a<d.text.length&&u.test(d.text.slice(a-1,a+1));Jb.innerHTML="<pre>"+d.getHTML(yd,a,zd,g)+"</pre>";var b=document.getElementById(zd),e=b.offsetTop,f=b.offsetLeft;if(m&&e==0&&f==0){var c=document.createElement("span");c.innerHTML="x";b.parentNode.insertBefore(c,b.nextSibling);e=c.offsetTop}return{top:e,left:f}}function Ab(a,f){var b,d=Hb(),c=d*(F(o,a.line)-(f?Wb:0));if(a.ch==0)b=0;else{var e=Gc(E(a.line),a.ch);b=e.left;if(h.lineWrapping)c+=Math.max(0,e.top)}return{x:b,y:c,yBot:c+d}}function Kc(c,n){if(n<0)n=0;var r=Hb(),u=oc(),p=Wb+Math.floor(n/r),d=G(o,p);if(d>=o.size)return{line:o.size-1,ch:E(o.size-1).text.length};var q=E(d),t=q.text,s=h.lineWrapping,i=s?p-F(o,d):0;if(c<=0&&i==0)return{line:d,ch:0};function m(b){var a=Gc(q,b);if(s){var c=Math.round(a.top/r);return Math.max(0,a.left+(c-i)*v.clientWidth)}return a.left}for(var f=0,l=0,a=t.length,g,b=Math.min(a,Math.ceil((c+i*v.clientWidth*.9)/u));;){var e=m(b);if(e<=c&&b<a)b=Math.min(a,Math.ceil(b*1.2));else{g=e;a=b;break}}if(c>g)return{line:d,ch:a};b=Math.floor(a*.8);e=m(b);if(e<c){f=b;l=e}for(;;){if(a-f<=1)return{line:d,ch:g-c>c-l?f:a};var k=Math.ceil((f+a)/2),j=m(k);if(j>c){a=k;g=j}else{f=k;l=j}}}function Ud(c){var a=Ab(c,true),b=k(R);return{x:b.left+a.x,y:b.top+a.y,yBot:b.top+a.yBot}}var Bc,Xc,Yb;function Hb(){if(Yb==null){Yb="<pre>";for(var b=0;b<49;++b)Yb+="x<br/>";Yb+="x</pre>"}var a=sb.clientHeight;if(a==Xc)return Bc;Xc=a;Jb.innerHTML=Yb;Bc=Jb.firstChild.offsetHeight/50||1;Jb.innerHTML="";return Bc}var nd,bd=0;function oc(){if(v.clientWidth==bd)return nd;bd=v.clientWidth;return nd=Jc("x")}function Qb(){return R.offsetTop}function Hc(){return R.offsetLeft}function Ob(e,f){var d=k(v,true),a,b;try{a=e.clientX;b=e.clientY}catch(e){return null}if(!f&&(a-d.left>v.clientWidth||b-d.top>v.clientHeight))return null;var c=k(R,true);return Kc(a-c.left,b-c.top)}function hd(d){var a=Ob(d),g=v.scrollTop;if(!a||window.opera)return;(c(j.from,j.to)||f(a,j.from)||!f(a,j.to))&&x(Ib)(a.line,a.ch);var i=H.style.cssText;Lb.style.position="absolute";H.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(d.clientY-5)+"px; left: "+(d.clientX-5)+"px; z-index: 1000; background: white; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";Vb=true;var k=H.value=hc();yb();S(H);function e(){var a=q(H.value).join("\n");a!=k&&x(Nb)(a,"end");Lb.style.position="relative";H.style.cssText=i;if(X)v.scrollTop=g;Vb=false;mc(true);tc()}if(t){D(d);var h=b(window,"mouseup",function(){h();setTimeout(e,20)},true)}else setTimeout(e,50)}function ic(){clearInterval(Qc);var a=true;qb.style.visibility="";Qc=setInterval(function(){qb.style.visibility=(a=!a)?"":"hidden"},650)}var Pc={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"};function gd(r){var e=j.inverted?j.from:j.to,f=E(e.line),c=e.ch-1,h=c>=0&&Pc[f.text.charAt(c)]||Pc[f.text.charAt(++c)];if(!h)return;for(var w=h.charAt(0),b=h.charAt(1)==">",g=b?1:-1,l=f.styles,t=c+1,a=0,q=l.length;a<q;a+=2)if((t-=l[a].length)<=0){var k=l[a+1];break}var i=[f.text.charAt(c)],v=/[(){}[\]]/;function s(f,m,o){if(!f.text)return;for(var c=f.styles,a=b?0:f.text.length-1,h,d=b?0:c.length-2,p=b?c.length:-2;d!=p;d+=2*g){var e=c[d];if(c[d+1]!=null&&c[d+1]!=k){a+=g*e.length;continue}for(var j=b?0:e.length-1,n=b?e.length:-1;j!=n;j+=g,a+=g)if(a>=m&&a<o&&v.test(h=e.charAt(j))){var l=Pc[h];if(l.charAt(1)==">"==b)i.push(h);else if(i.pop()!=l.charAt(0))return{pos:a,match:false};else if(!i.length)return{pos:a,match:true}}}}for(var a=e.line,q=b?Math.min(a+100,o.size):Math.max(-1,a-100);a!=q;a+=g){var f=E(a),n=a==e.line,d=s(f,n&&b?c+1:0,n&&!b?c:f.text.length);if(d)break}if(!d)d={pos:null,match:false};var k=d.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket",u=Oc({line:e.line,ch:c},{line:e.line,ch:c+1},k),p=d.pos!=null&&Oc({line:a,ch:d.pos},{line:a,ch:d.pos+1},k),m=x(function(){u.clear();p&&p.clear()});if(r)setTimeout(m,800);else Db=m}function ed(f){for(var c,b,a=f,g=f-40;a>g;--a){if(a==0)return 0;var e=E(a-1);if(e.stateAfter)return a;var d=e.indentation(h.tabSize);if(b==null||c>d){b=a-1;c=d}}return b}function ec(b){var c=ed(b),a=c&&E(c-1).stateAfter;if(!a)a=J(kb);else a=n(kb,a);o.iter(c,b,function(b){b.highlight(kb,a,h.tabSize);b.stateAfter=n(kb,a)});c<b&&tb.push({from:c,to:b});b<o.size&&!E(b).stateAfter&&zb.push(b);return a}function Id(a,c){var b=ec(a);o.iter(a,c,function(a){a.highlight(kb,b,h.tabSize);a.stateAfter=n(kb,b)})}function Gd(){var k=+new Date+h.workTime,j=zb.length;while(zb.length){if(!E(lb).stateAfter)var c=lb;else var c=zb.pop();if(c>=o.size)continue;var e=ed(c),a=e&&E(e-1).stateAfter;if(a)a=n(kb,a);else a=J(kb);var f=0,g=kb.compareStates,d=false,b=e,i=false;o.iter(b,o.size,function(l){var e=l.stateAfter;if(+new Date>k){zb.push(b);Ic(h.workDelay);d&&tb.push({from:c,to:b+1});return i=true}var m=l.highlight(kb,a,h.tabSize);if(m)d=true;l.stateAfter=n(kb,a);var j=null;if(g){var o=e&&g(e,a);if(o!=Y)j=!!o}if(j==null)if(m!==false||!e)f=0;else if(++f>3&&(!kb.indent||kb.indent(e,"")==kb.indent(a,"")))j=true;if(j)return true;++b});if(i)return;d&&tb.push({from:c,to:b+1})}if(j&&h.onHighlightComplete)h.onHighlightComplete(Z)}function Ic(a){if(!zb.length)return;Wd.set(a,x(Gd))}function yc(){Gb=gc=Zb=null;tb=[];Eb=false;bc=[]}function Dc(){var b=false,d;Sb&&Ed();if(Eb)b=!Uc();if(tb.length)d=Kb(tb,true);else{Eb&&ad();xb&&Fc()}b&&Uc();if(Eb){Bd();ic()}ub&&!Vb&&(Gb===true||Gb!==false&&Eb)&&mc(gc);Eb&&h.matchBrackets&&setTimeout(x(function(){if(Db){Db();Db=null}c(j.from,j.to)&&gd(false)}),20);var f=Zb,e=bc;if(Eb&&h.onCursorActivity)h.onCursorActivity(Z);if(f&&h.onChange&&Z)h.onChange(Z,f);for(var a=0;a<e.length;++a)e[a](Z);if(d&&h.onUpdate)h.onUpdate(Z)}var Zc=0;function x(a){return function(){!Zc++&&yc();try{var b=a.apply(this,arguments)}finally{!--Zc&&Dc()}return b}}function cd(a){pb.startCompound();try{return a()}finally{pb.endCompound()}}for(var vc in y)if(y.propertyIsEnumerable(vc)&&!Z.propertyIsEnumerable(vc))Z[vc]=y[vc];return Z}a.defaults={value:"",mode:null,theme:"default",indentUnit:2,indentWithTabs:false,smartIndent:true,tabSize:4,keyMap:"default",extraKeys:null,electricChars:true,autoClearEmptyLines:false,onKeyEvent:null,onDragEvent:null,lineWrapping:false,lineNumbers:false,gutter:false,fixedGutter:false,firstLineNumber:1,readOnly:false,dragDrop:true,onChange:null,onCursorActivity:null,onGutterClick:null,onHighlightComplete:null,onUpdate:null,onFocus:null,onBlur:null,onScroll:null,matchBrackets:false,workTime:100,workDelay:200,pollInterval:100,undoDepth:40,tabindex:null,autofocus:null};var P=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),Q=P||/Mac/.test(navigator.platform),lb=/Win/.test(navigator.platform),E=a.modes={},o=a.mimeModes={};a.defineMode=function(c,b){if(!a.defaults.mode&&c!="null")a.defaults.mode=c;if(arguments.length>2){b.dependencies=[];for(var d=2;d<arguments.length;++d)b.dependencies.push(arguments[d])}E[c]=b};a.defineMIME=function(a,b){o[a]=b};a.resolveMode=function(b){if(typeof b=="string"&&o.hasOwnProperty(b))b=o[b];else if(typeof b=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(b))return a.resolveMode("application/xml");return typeof b=="string"?{name:b}:b||{name:"null"}};a.getMode=function(d,b){var b=a.resolveMode(b),c=E[b.name];return!c?a.getMode(d,"text/plain"):c(d,b)};a.listModes=function(){var a=[];for(var b in E)E.propertyIsEnumerable(b)&&a.push(b);return a};a.listMIMEs=function(){var b=[];for(var a in o)o.propertyIsEnumerable(a)&&b.push({mime:a,mode:o[a]});return b};var y=a.extensions={};a.defineExtension=function(b,a){y[b]=a};var U=a.commands={selectAll:function(a){a.setSelection({line:0,ch:0},{line:a.lineCount()-1})},killLine:function(b){var a=b.getCursor(true),e=b.getCursor(false),d=!c(a,e);if(!d&&b.getLine(a.line).length==a.ch)b.replaceRange("",a,{line:a.line+1,ch:0});else b.replaceRange("",a,d?e:{line:a.line})},deleteLine:function(a){var b=a.getCursor().line;a.replaceRange("",{line:b,ch:0},{line:b})},undo:function(a){a.undo()},redo:function(a){a.redo()},goDocStart:function(a){a.setCursor(0,0,true)},goDocEnd:function(a){a.setSelection({line:a.lineCount()-1},null,true)},goLineStart:function(a){a.setCursor(a.getCursor().line,0,true)},goLineStartSmart:function(b){var a=b.getCursor(),d=b.getLine(a.line),c=Math.max(0,d.search(/\S/));b.setCursor(a.line,a.ch<=c&&a.ch?0:c,true)},goLineEnd:function(a){a.setSelection({line:a.getCursor().line},null,true)},goLineUp:function(a){a.moveV(-1,"line")},goLineDown:function(a){a.moveV(1,"line")},goPageUp:function(a){a.moveV(-1,"page")},goPageDown:function(a){a.moveV(1,"page")},goCharLeft:function(a){a.moveH(-1,"char")},goCharRight:function(a){a.moveH(1,"char")},goColumnLeft:function(a){a.moveH(-1,"column")},goColumnRight:function(a){a.moveH(1,"column")},goWordLeft:function(a){a.moveH(-1,"word")},goWordRight:function(a){a.moveH(1,"word")},delCharLeft:function(a){a.deleteH(-1,"char")},delCharRight:function(a){a.deleteH(1,"char")},delWordLeft:function(a){a.deleteH(-1,"word")},delWordRight:function(a){a.deleteH(1,"word")},indentAuto:function(a){a.indentSelection("smart")},indentMore:function(a){a.indentSelection("add")},indentLess:function(a){a.indentSelection("subtract")},insertTab:function(a){a.replaceSelection("\t","end")},defaultTab:function(a){if(a.somethingSelected())a.indentSelection("add");else a.replaceSelection("\t","end")},transposeChars:function(c){var a=c.getCursor(),b=c.getLine(a.line);a.ch>0&&a.ch<b.length-1&&c.replaceRange(b.charAt(a.ch)+b.charAt(a.ch-1),{line:a.line,ch:a.ch-1},{line:a.line,ch:a.ch+1})},newlineAndIndent:function(a){a.replaceSelection("\n","end");a.indentLine(a.getCursor().line)},toggleOverwrite:function(a){a.toggleOverwrite()}},g=a.keyMap={};g.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharRight",Backspace:"delCharLeft",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite"};g.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goWordLeft","Ctrl-Right":"goWordRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delWordLeft","Ctrl-Delete":"delWordRight","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore",fallthrough:"basic"};g.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goWordLeft","Alt-Right":"goWordRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delWordLeft","Ctrl-Alt-Backspace":"delWordRight","Alt-Delete":"delWordRight","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore",fallthrough:["basic","emacsy"]};g["default"]=Q?g.macDefault:g.pcDefault;g.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageUp","Shift-Ctrl-V":"goPageDown","Ctrl-D":"delCharRight","Ctrl-H":"delCharLeft","Alt-D":"delWordRight","Alt-Backspace":"delWordLeft","Ctrl-K":"killLine","Ctrl-T":"transposeChars"};function K(a){return typeof a=="string"?g[a]:a}function B(e,b,f,d,c){function a(f){f=K(f);var h=f[e];if(h!=null&&d(h))return true;if(f.nofallthrough){c&&c();return true}var b=f.fallthrough;if(b==null)return false;if(Object.prototype.toString.call(b)!="[object Array]")return a(b);for(var g=0,i=b.length;g<i;++g)if(a(b[g]))return true;return false}return b&&a(b)?true:a(f)}function ab(b){var a=l[e(b,"keyCode")];return a=="Ctrl"||a=="Alt"||a=="Shift"||a=="Mod"}a.fromTextArea=function(c,d){if(!d)d={};d.value=c.value;if(!d.tabindex&&c.tabindex)d.tabindex=c.tabindex;if(d.autofocus==null&&c.getAttribute("autofocus")!=null)d.autofocus=true;function f(){c.value=e.getValue()}if(c.form){var i=b(c.form,"submit",f,true);if(typeof c.form.submit=="function"){var h=c.form.submit;function g(){f();c.form.submit=h;c.form.submit();c.form.submit=g}c.form.submit=g}}c.style.display="none";var e=a(function(a){c.parentNode.insertBefore(a,c.nextSibling)},d);e.save=f;e.getTextArea=function(){return c};e.toTextArea=function(){f();c.parentNode.removeChild(e.getWrapperElement());c.style.display="";if(c.form){i();if(typeof c.form.submit=="function")c.form.submit=h}};return e};function n(d,a){if(a===true)return a;if(d.copyState)return d.copyState(a);var c={};for(var e in a){var b=a[e];if(b instanceof Array)b=b.concat([]);c[e]=b}return c}a.copyState=n;function J(a,b,c){return a.startState?a.startState(b,c):true}a.startState=J;function v(b,a){this.pos=this.start=0;this.string=b;this.tabSize=a||8}v.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==0},peek:function(){return this.string.charAt(this.pos)},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(a){var b=this.string.charAt(this.pos);if(typeof a=="string")var c=b==a;else var c=b&&(a.test?a.test(b):a(b));if(c){++this.pos;return b}},eatWhile:function(a){var b=this.pos;while(this.eat(a));return this.pos>b},eatSpace:function(){var a=this.pos;while(/[\s\u00a0]/.test(this.string.charAt(this.pos)))++this.pos;return this.pos>a},skipToEnd:function(){this.pos=this.string.length},skipTo:function(b){var a=this.string.indexOf(b,this.pos);if(a>-1){this.pos=a;return true}},backUp:function(a){this.pos-=a},column:function(){return H(this.string,this.start,this.tabSize)},indentation:function(){return H(this.string,null,this.tabSize)},match:function(a,c,e){if(typeof a=="string"){function d(a){return e?a.toLowerCase():a}if(d(this.string).indexOf(d(a),this.pos)==this.pos){if(c!==false)this.pos+=a.length;return true}}else{var b=this.string.slice(this.pos).match(a);if(b&&c!==false)this.pos+=b[0].length;return b}},current:function(){return this.string.slice(this.start,this.pos)}};a.StringStream=v;function z(c,d,a,b){this.from=c;this.to=d;this.style=a;this.marker=b}z.prototype={attach:function(a){this.marker.set.push(a)},detach:function(b){var a=s(this.marker.set,b);a>-1&&this.marker.set.splice(a,1)},split:function(a,b){if(this.to<=a&&this.to!=null)return null;var c=this.from<a||this.from==null?null:this.from-a+b,d=this.to==null?null:this.to-a+b;return new z(c,d,this.style,this.marker)},dup:function(){return new z(null,null,this.style,this.marker)},clipTo:function(d,a,e,b,c){if(d&&b>this.from&&(b<this.to||this.to==null))this.from=null;else if(this.from!=null&&this.from>=a)this.from=Math.max(b,this.from)+c;if(e&&(a<this.to||this.to==null)&&(a>this.from||this.from==null))this.to=null;else if(this.to!=null&&this.to>a)this.to=b<this.to?this.to+c:a},isDead:function(){return this.from!=null&&this.to!=null&&this.from>=this.to},sameSet:function(a){return this.marker==a.marker}};function T(a){this.from=a;this.to=a;this.line=null}T.prototype={attach:function(a){this.line=a},detach:function(a){if(this.line==a)this.line=null},split:function(a,b){if(a<this.from){this.from=this.to=this.from-a+b;return this}},isDead:function(){return this.from>this.to},clipTo:function(c,a,d,b,e){if((c||a<this.from)&&(d||b>this.to)){this.from=0;this.to=-1}else if(this.from>a)this.from=this.to=Math.max(b,this.from)+e},sameSet:function(){return false},find:function(){return!this.line||!this.line.parent?null:{line:p(this.line),ch:this.from}},clear:function(){if(this.line){var a=s(this.line.marked,this);a!=-1&&this.line.marked.splice(a,1);this.line=null}}};function i(a,b){this.styles=b||[a,null];this.text=a;this.height=1;this.marked=this.gutterMarker=this.className=this.bgClassName=this.handlers=null;this.stateAfter=this.parent=this.hidden=null}i.inheritMarks=function(h,e){var c=new i(h),a=e&&e.marked;if(a)for(var b=0;b<a.length;++b)if(a[b].to==null&&a[b].style){var f=c.marked||(c.marked=[]),g=a[b],d=g.dup();f.push(d);d.attach(c)}return c};i.prototype={replace:function(a,h,b){var d=[],c=this.marked,e=h==null?this.text.length:h;x(0,a,this.styles,d);b&&d.push(b,null);x(e,this.text.length,this.styles,d);this.styles=d;this.text=this.text.slice(0,a)+b+this.text.slice(e);this.stateAfter=null;if(c)for(var i=b.length-(e-a),f=0;f<c.length;++f){var g=c[f];g.clipTo(a==null,a||0,h==null,e,i);if(g.isDead()){g.detach(this);c.splice(f--,1)}}},split:function(f,e){var h=[e,null],c=this.marked;x(f,this.text.length,this.styles,h);var a=new i(e+this.text.slice(f),h);if(c)for(var d=0;d<c.length;++d){var g=c[d],b=g.split(f,e.length);if(b){if(!a.marked)a.marked=[];a.marked.push(b);b.attach(a);b==g&&c.splice(d--,1)}}return a},append:function(g){var e=this.text.length,f=g.marked,b=this.marked;this.text+=g.text;x(0,g.text.length,g.styles,this.styles);if(b)for(var c=0;c<b.length;++c)if(b[c].to==null)b[c].to=e;if(f&&f.length){if(!b)this.marked=b=[];a:for(var c=0;c<f.length;++c){var a=f[c];if(!a.from)for(var h=0;h<b.length;++h){var d=b[h];if(d.to==e&&d.sameSet(a)){d.to=a.to==null?null:a.to+e;if(d.isDead()){d.detach(this);f.splice(c--,1)}continue a}}b.push(a);a.attach(this);a.from+=e;if(a.to!=null)a.to+=e}}},fixMarkEnds:function(g){var d=this.marked,c=g.marked;if(!d)return;for(var e=0;e<d.length;++e){var b=d[e],a=b.to==null;if(a&&c)for(var f=0;f<c.length;++f)if(c[f].sameSet(b)){a=false;break}if(a)b.to=this.text.length}},fixMarkStarts:function(){var a=this.marked;if(!a)return;for(var b=0;b<a.length;++b)if(a[b].from==null)a[b].from=0},addMark:function(a){a.attach(this);if(this.marked==null)this.marked=[];this.marked.push(a);this.marked.sort(function(a,b){return(a.from||0)-(b.from||0)})},highlight:function(h,j,k){var c=new v(this.text,k),b=this.styles,a=0,d=false,i=b[0],e;this.text==""&&h.blankLine&&h.blankLine(j);while(!c.eol()){var g=h.token(c,j),f=this.text.slice(c.start,c.pos);c.start=c.pos;if(a&&b[a-1]==g)b[a-2]+=f;else if(f){if(!d&&(b[a+1]!=g||a&&b[a-2]!=e))d=true;b[a++]=f;b[a++]=g;e=i;i=b[a]}if(c.pos>5e3){b[a++]=this.text.slice(c.pos);b[a++]=null;break}}if(b.length!=a){b.length=a;d=true}if(a&&b[a-2]!=e)d=true;return d||(b.length<5&&this.text.length<10?null:false)},getTokenAt:function(d,b,f){var e=this.text,a=new v(e);while(a.pos<f&&!a.eol()){a.start=a.pos;var c=d.token(a,b)}return{start:a.start,end:a.pos,string:a.current(),className:c||null,state:b}},indentation:function(a){return H(this.text,null,a)},getHTML:function(E,b,G,F){var e=[],A=true,p=0;function l(a,f){if(!a)return;if(A&&m&&a.charAt(0)==" ")a=" "+a.slice(1);A=false;if(a.indexOf("\t")==-1){p+=a.length;var c=h(a)}else for(var c="",b=0;;){var d=a.indexOf("\t",b);if(d==-1){c+=h(a.slice(b));p+=a.length-b;break}else{p+=d-b;var g=E(p);c+=h(a.slice(b,d))+g.html;p+=g.width;b=d+1}}if(f)e.push('<span class="',f,'">',c,"</span>");else e.push(c)}var n=l;if(b!=null){var a=0,B='<span id="'+G+'">';n=function(c,d){var g=c.length;if(b>=a&&b<a+g){if(b>a){l(c.slice(0,b-a),d);F&&e.push("<wbr>")}e.push(B);var f=b-a;l(window.opera?c.slice(f,f+1):c.slice(f),d);e.push("</span>");window.opera&&l(c.slice(f+1),d);b--;a+=g}else{a+=g;l(c,d);if(a==b&&a==i)e.push(B+" </span>");else if(a>b+10&&/\s/.test(c))n=function(){}}}}var u=this.styles,z=this.text,d=this.marked,i=z.length;function y(a){return!a?null:"cm-"+a.replace(/ +/g," cm-")}if(!z&&b==null)n(" ");else if(!d||!d.length)for(var q=0,t=0;t<i;q+=2){var s=u[q],v=u[q+1],C=s.length;if(t+C>i)s=s.slice(0,i-t);t+=C;n(s,y(v))}else{var c=0,q=0,f="",v,H=0,j=d[0].from||0,g=[],k=0;function D(){var b;while(k<d.length&&((b=d[k]).from==c||b.from==null)){b.style!=null&&g.push(b);++k}j=k<d.length?d[k].from:Infinity;for(var a=0;a<g.length;++a){var e=g[a].to||Infinity;if(e==c)g.splice(a--,1);else j=Math.min(e,j)}}var I=0;while(c<i){j==c&&D();for(var o=Math.min(i,j);;){if(f){for(var w=c+f.length,r=v,x=0;x<g.length;++x)r=(r?r+" ":"")+g[x].style;n(w>o?f.slice(0,o-c):f,r);if(w>=o){f=f.slice(o-c);c=o;break}c=w}f=u[q++];v=y(u[q++])}}}return e.join("")},cleanUp:function(){this.parent=null;if(this.marked)for(var a=0,b=this.marked.length;a<b;++a)this.marked[a].detach(this)}};function x(i,f,d,h){for(var c=0,a=0,g=0;a<f;c+=2){var b=d[c],e=a+b.length;if(g==0){e>i&&h.push(b.slice(i-a,Math.min(b.length,f-a)),d[c+1]);if(e>=i)g=1}else if(g==1)if(e>f)h.push(b.slice(0,f-a),d[c+1]);else h.push(b,d[c+1]);a=e}}function A(a){this.lines=a;this.parent=null;for(var b=0,d=a.length,c=0;b<d;++b){a[b].parent=this;c+=a[b].height}this.height=c}A.prototype={chunkSize:function(){return this.lines.length},remove:function(b,e,f){for(var c=b,g=b+e;c<g;++c){var a=this.lines[c];this.height-=a.height;a.cleanUp();if(a.handlers)for(var d=0;d<a.handlers.length;++d)f.push(a.handlers[d])}this.lines.splice(b,e)},collapse:function(a){a.splice.apply(a,[a.length,0].concat(this.lines))},insertHeight:function(c,a,d){this.height+=d;this.lines=this.lines.slice(0,c).concat(a).concat(this.lines.slice(c));for(var b=0,e=a.length;b<e;++b)a[b].parent=this},iterN:function(a,d,b){for(var c=a+d;a<c;++a)if(b(this.lines[a]))return true}};function w(a){this.children=a;for(var e=0,d=0,c=0,f=a.length;c<f;++c){var b=a[c];e+=b.chunkSize();d+=b.height;b.parent=this}this.size=e;this.height=d;this.parent=null}w.prototype={chunkSize:function(){return this.size},remove:function(b,e,h){this.size-=e;for(var d=0;d<this.children.length;++d){var a=this.children[d],c=a.chunkSize();if(b<c){var f=Math.min(e,c-b),i=a.height;a.remove(b,f,h);this.height-=i-a.height;if(c==f){this.children.splice(d--,1);a.parent=null}if((e-=f)==0)break;b=0}else b-=c}if(this.size-e<25){var g=[];this.collapse(g);this.children=[new A(g)];this.children[0].parent=this}},collapse:function(b){for(var a=0,c=this.children.length;a<c;++a)this.children[a].collapse(b)},insert:function(d,a){for(var c=0,b=0,e=a.length;b<e;++b)c+=a[b].height;this.insertHeight(d,a,c)},insertHeight:function(d,f,e){this.size+=f.length;this.height+=e;for(var b=0,i=this.children.length;b<i;++b){var a=this.children[b],g=a.chunkSize();if(d<=g){a.insertHeight(d,f,e);if(a.lines&&a.lines.length>50){while(a.lines.length>50){var h=a.lines.splice(a.lines.length-25,25),c=new A(h);a.height-=c.height;this.children.splice(b+1,0,c);c.parent=this}this.maybeSpill()}break}d-=g}},maybeSpill:function(){if(this.children.length<=10)return;var a=this;do{var e=a.children.splice(a.children.length-5,5),b=new w(e);if(!a.parent){var c=new w(a.children);c.parent=a;a.children=[c,b];a=c}else{a.size-=b.size;a.height-=b.height;var d=s(a.parent.children,a);a.parent.children.splice(d+1,0,b)}b.parent=a.parent}while(a.children.length>10);a.parent.maybeSpill()},iter:function(a,c,b){this.iterN(a,c-a,b)},iterN:function(a,f,g){for(var c=0,h=this.children.length;c<h;++c){var d=this.children[c],b=d.chunkSize();if(a<b){var e=Math.min(f,b-a);if(d.iterN(a,e,g))return true;if((f-=e)==0)break;a=0}else a-=b}}};function fb(a,b){while(!a.lines)for(var e=0;;++e){var c=a.children[e],d=c.chunkSize();if(b<d){a=c;break}b-=d}return a.lines[b]}function p(c){if(c.parent==null)return null;for(var b=c.parent,e=s(b.lines,c),a=b.parent;a;b=a,a=a.parent)for(var d=0,f=a.children.length;;++d){if(a.children[d]==b)break;e+=a.children[d].chunkSize()}return e}function G(b,c){var e=0;a:do{for(var a=0,h=b.children.length;a<h;++a){var d=b.children[a],f=d.height;if(c<f){b=d;continue a}c-=f;e+=d.chunkSize()}return e}while(!b.lines);for(var a=0,h=b.lines.length;a<h;++a){var i=b.lines[a],g=i.height;if(c<g)break;c-=g}return e+a}function F(b,e){var c=0;a:do{for(var a=0,g=b.children.length;a<g;++a){var d=b.children[a],f=d.chunkSize();if(e<f){b=d;continue a}e-=f;c+=d.height}return c}while(!b.lines);for(var a=0;a<e;++a)c+=b.lines[a].height;return c}function M(){this.time=0;this.done=[];this.undone=[];this.compound=0;this.closed=false}M.prototype={addChange:function(c,g,b){this.undone.length=0;var i=+new Date,e=this.done[this.done.length-1],a=e&&e[e.length-1],j=i-this.time;if(this.compound&&e&&!this.closed)e.push({start:c,added:g,old:b});else if(j>400||!a||this.closed||a.start>c+b.length||a.start+a.added<c){this.done.push([{start:c,added:g,old:b}]);this.closed=false}else{for(var f=Math.max(0,a.start-c),h=Math.max(0,c+b.length-(a.start+a.added)),d=f;d>0;--d)a.old.unshift(b[d-1]);for(var d=h;d>0;--d)a.old.push(b[b.length-d]);if(f)a.start=c;a.added+=g-(b.length-f-h)}this.time=i},startCompound:function(){if(!this.compound++)this.closed=true},endCompound:function(){if(!--this.compound)this.closed=true}};function eb(){D(this)}function r(a){if(!a.stop)a.stop=eb;return a}function d(a){if(a.preventDefault)a.preventDefault();else a.returnValue=false}function R(a){if(a.stopPropagation)a.stopPropagation();else a.cancelBubble=true}function D(a){d(a);R(a)}a.e_stop=D;a.e_preventDefault=d;a.e_stopPropagation=R;function C(a){return a.target||a.srcElement}function V(a){return a.which?a.which:a.button&1?1:a.button&2?3:a.button&4?2:void 0}function e(a,b){var c=a.override&&a.override.hasOwnProperty(b);return c?a.override[b]:a[b]}function b(a,b,c,e){if(typeof a.addEventListener=="function"){a.addEventListener(b,c,false);if(e)return function(){a.removeEventListener(b,c,false)}}else{var d=function(a){c(a||window.event)};a.attachEvent("on"+b,d);if(e)return function(){a.detachEvent("on"+b,d)}}}a.connect=b;function L(){this.id=null}L.prototype={"set":function(a,b){clearTimeout(this.id);this.id=setTimeout(b,a)}};var Y=a.Pass={toString:function(){return"CodeMirror.Pass"}},t=/gecko\/\d{7}/i.test(navigator.userAgent),m=/MSIE \d/.test(navigator.userAgent),X=/MSIE [1-8]\b/.test(navigator.userAgent),db=m&&document.documentMode==5,N=/WebKit\//.test(navigator.userAgent),W=/Chrome\//.test(navigator.userAgent),jb=/Apple Computer/.test(navigator.vendor),O=/KHTML\//.test(navigator.userAgent),cb=function(){if(X)return false;var a=document.createElement("div");return"draggable"in a||"dragDrop"in a}(),kb=function(){var a=document.createElement("textarea");a.value="foo\nbar";return a.value.indexOf("\r")>-1?"\r\n":"\n"}(),u=/^$/;if(t)u=/$'/;else if(jb)u=/\-[^ \-?]|\?[^ !'\"\),.\-\/:;\?\]\}]/;else if(W)u=/\-[^ \-\.?]|\?[^ \-\.?\]\}:;!'\"\),\/]|[\.!\"#&%\)*+,:;=>\]|\}~][\(\{\[<]|\$'/;function H(c,a,e){if(a==null){a=c.search(/[^\s\u00a0]/);if(a==-1)a=c.length}for(var d=0,b=0;d<a;++d)if(c.charAt(d)=="\t")b+=e-b%e;else++b;return b}function Z(a){return a.currentStyle?a.currentStyle:window.getComputedStyle(a,null)}function k(d,f){for(var g=d.ownerDocument.body,b=0,c=0,e=false,a=d;a;a=a.offsetParent){var h=a.offsetLeft,i=a.offsetTop;if(a==g){b+=Math.abs(h);c+=Math.abs(i)}else b+=h,c+=i;if(f&&Z(a).position=="fixed")e=true}for(var j=f&&!e?null:g,a=d.parentNode;a!=j;a=a.parentNode)if(a.scrollLeft!=null){b-=a.scrollLeft;c-=a.scrollTop}return{left:b,top:c}}if(document.documentElement.getBoundingClientRect!=null)k=function(d,c){try{var a=d.getBoundingClientRect();a={top:a.top,left:a.left}}catch(e){a={top:0,left:0}}if(!c)if(window.pageYOffset==null){var b=document.documentElement||document.body.parentNode;if(b.scrollTop==null)b=document.body;a.top+=b.scrollTop;a.left+=b.scrollLeft}else{a.top+=window.pageYOffset;a.left+=window.pageXOffset}return a};function ib(a){return a.textContent||a.innerText||a.nodeValue||""}function S(a){if(P){a.selectionStart=0;a.selectionEnd=a.value.length}else a.select()}function c(a,b){return a.line==b.line&&a.ch==b.ch}function f(a,b){return a.line<b.line||a.line==b.line&&a.ch<b.ch}function gb(a){return{line:a.line,ch:a.ch}}var j=document.createElement("pre");function h(a){j.textContent=a;return j.innerHTML}if(h("a")=="\na")h=function(a){j.textContent=a;return j.innerHTML.slice(1)};else if(h("\t")!="\t")h=function(a){j.innerHTML="";j.appendChild(document.createTextNode(a));return j.innerHTML};a.htmlEscape=h;function hb(c,a){if(!a)return 0;if(!c)return a.length;for(var d=c.length,b=a.length;d>=0&&b>=0;--d,--b)if(c.charAt(d)!=a.charAt(b))break;return b+1}function s(a,c){if(a.indexOf)return a.indexOf(c);for(var b=0,d=a.length;b<d;++b)if(a[b]==c)return b;return-1}function I(a){return/\w/.test(a)||a.toUpperCase()!=a.toLowerCase()}var q="\n\nb".split(/\n/).length!=3?function(b){var c=0,a,d=[];while((a=b.indexOf("\n",c))>-1){d.push(b.slice(c,b.charAt(a-1)=="\r"?a-1:a));c=a+1}d.push(b.slice(c));return d}:function(a){return a.split(/\r?\n/)};a.splitLines=q;var bb=window.getSelection?function(a){try{return a.selectionStart!=a.selectionEnd}catch(b){return false}}:function(b){try{var a=b.ownerDocument.selection.createRange()}catch(c){}return!a||a.parentElement()!=b?false:a.compareEndPoints("StartToEnd",a)!=0};a.defineMode("null",function(){return{token:function(a){a.skipToEnd()}}});a.defineMIME("text/plain","null");var l={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",91:"Mod",92:"Mod",93:"Mod",127:"Delete",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63276:"PageUp",63277:"PageDown",63275:"End",63273:"Home",63234:"Left",63232:"Up",63235:"Right",63233:"Down",63302:"Insert",63272:"Delete"};a.keyNames=l;(function(){for(var a=0;a<10;a++)l[a+48]=String(a);for(var a=65;a<=90;a++)l[a]=String.fromCharCode(a);for(var a=1;a<=12;a++)l[a+111]=l[a+63235]="F"+a})();return a}()